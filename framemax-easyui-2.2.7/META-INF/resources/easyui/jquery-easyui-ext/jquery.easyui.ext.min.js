function $getParam(e,t){var n=null,a=[],r=t||location.search;if(!r||r.length<1)return n;if(r=r.substr(r.indexOf("?")+1),!r)return n;for(var i=r.split("&"),o=0;o<i.length;o++)a=i[o].split("="),a[0]===e&&(n=decodeURIComponent(a[1]));return n}function $url(e){return e&&0!=e.indexOf("http:")&&0!=e.indexOf("https:")&&pageContext.contextPath&&0!=e.indexOf(pageContext.contextPath)?"~"==e.charAt(0)?e.substring(1):"/"==e.charAt(0)?pageContext.contextPath+e:e:e}function $rest(e,t){return $url("/rest/"+e+"/"+t+".json")}function $postJSON(e,t,n,a){$.ajax({url:e,data:"string"==typeof t?t:JSON.stringify(t),contentType:"application/json;charset=utf-8",success:n,type:"POST",dataType:"JSON",error:a})}function $isChildWin(){return top.window!=window}function $addListener(e,t){window.attachEvent?window.attachEvent("on"+e,t):window.addEventListener(e,t,!1)}function $isValidValue(e){return null!==e&&void 0!==e&&("string"!=typeof e||""!==e)}var fmx=this.fmx||(this.fmx={});fmx.pageContext=window.pageContext||{},function($,fmx){function getSelectCodeValues(){return fmx.pageContext.easyui.useGlobalCodeData&&$isChildWin()&&window.top.fmx&&window.top.fmx.getSelectCodeValues?window.top.fmx.getSelectCodeValues():SELECT_CODE_VALUES}function getSelectCodeDatas(){return fmx.pageContext.easyui.useGlobalCodeData&&$isChildWin()&&window.top.fmx&&window.top.fmx.getSelectCodeDatas?window.top.fmx.getSelectCodeDatas():SELECT_CODE_DATAS}function getSelectCodeOpts(){return $isChildWin()&&window.top.fmx&&window.top.fmx.getSelectCodeOpts?window.top.fmx.getSelectCodeOpts():SELECT_CODE_OPTS}function getSelectCodeValue(e,t,n){function a(e,t){var n=e[t];return $isValidValue(n)||(t=t.toLowerCase(),$.each(e,function(e,a){if(e.toLowerCase()==t)return n=a,!1})),n}if(e){var r=getSelectCodeValues(),i=r[e];if(i&&$isValidValue(t)){if(t=t.toString(),t.indexOf(",")>-1){var o=[];return $.each(t.split(","),function(e,t){$isValidValue(t)&&o.push(a(i,t.toString()))}),n?o.join(","):o}return a(i,t)}}return""}function mergeSelectCodeValues(e,t){if($.isPlainObject(e))$.each(e,function(e,t){mergeSelectCodeValues(e,t)});else if(e&&$.isPlainObject(t)&&!$.isEmptyObject(t)){var n=getSelectCodeValues(),a=n[e];a||(n[e]=a={}),$.each(t,function(e,t){a[e]=t})}}function mergeSelectCodeValue(e,t,n,a){if(e&&t&&n&&$.isArray(a)){var r={};if($.each(a,function(e,a){r[a[t]]=a[n]}),!$.isEmptyObject(r)){var i={};i[e]=r,$.extend(!0,getSelectCodeValues(),i)}}}function getAuthorizedFunctions(){return top.pageContext&&top.pageContext.permissionCodes?top.pageContext.permissionCodes:$isChildWin()&&window.top.fmx&&window.top.fmx.getAuthorizedFunctions?window.top.fmx.getAuthorizedFunctions():AUTHORIZED_FUNCTIONS}function checkFunctionAuthorization(e){return getAuthorizedFunctions().indexOf(e)>=0}function textSelected(){if(document.selection){var e=document.selection;return"Text"==e.type}if(window.getSelection){var e=window.getSelection();return"type"in e?"Range"==e.type:e.focusNode&&"#text"==e.focusNode.nodeName&&!e.isCollapsed}return!1}function getI18nTitle(i18nRoot,i18nKey,defaultTitle){if(defaultTitle)return defaultTitle;if(!i18nRoot)return i18nKey;for(var i18nRoots=i18nRoot.split(","),i=0;i<i18nRoots.length;i++){var root="i18n."+$.trim(i18nRoots[i]);if(eval(root)&&eval(root)[i18nKey])return eval(root)[i18nKey]}return i18nKey}var CommonExporter=new function(){function e(e,n){var a=document.createElement("form");a.setAttribute("method","post"),a.setAttribute("action",t+e+".do"),a.setAttribute("target","_blank"),$.each(n,function(e,t){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",e),n.setAttribute("value",$.isPlainObject(t)||$.isArray(t)?JSON.stringify(t):t),a.appendChild(n)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}var t=$url("/commonExport/");this.doExportQuery=function(t,n,a){e("exportQuery",{exportInfo:t,queryInfo:n,columns:a})},this.doExport=function(t,n){e("export",{exportInfo:t,data:n})}},CommonQueryService=new function(){function e(e,t,n,a){var r=$rest("commonQueryRest",e);$postJSON(r,t,n,a)}this.getSelectCodeData=function(t,n,a){e("getSelectCodeData",t,n,a)},this.getSelectCodeDatas=function(t,n,a){e("getSelectCodeDatas",t,n,a)},this.getSelectCodeValuesByKeys=function(t,n,a){e("getSelectCodeValuesByKeys",t,n,a)},this.getSelectCodeOpts=function(t,n,a){e("getSelectCodeOpts",t,n,a)},this.getSelectCodeOpt=function(e,t,n){$.ajax({url:$rest("commonQueryRest","getSelectCodeOpt"),data:"codeType="+e,type:"POST",dataType:"json",success:t,error:n})},this.query=function(t,n,a){e("query",t,n,a)}},SELECT_CODE_VALUES={},SELECT_CODE_DATAS={},SELECT_CODE_OPTS={},AUTHORIZED_FUNCTIONS=[];$.extend($.easyui,{indexOfArray:function(e,t,n){for(var a=void 0==n?new String(t).toString():new String(n).toString(),r=0,i=e.length;r<i;r++)if(void 0==n){var o=e[r];if(o==t||typeof o!=typeof t&&new String(o).toString()==a)return r}else{var o=e[r][t];if(o===n)return r;if(typeof n!=typeof o&&new String(o).toString()==a)return r}return-1}});var formatters={formatNumber:function(e,t){return numeral(e).format(t||"0.00")},parseNumber:function(e){return numeral().unformat(e)},formatCurrency:function(e,t){return numeral(e).format(t||"$0.00")},parseCurrency:function(e){return numeral().unformat(e)},formatDate:function(e,t){return e?moment(e).format(t||pageContext.defaultDateFormat||"YYYY-MM-DD"):e},formatDatetime:function(e,t){return t||(t=pageContext.defaultDatetimeFormat||"YYYY-MM-DD HH:mm:ss"),formatters.formatDate(e,t)},formatTime:function(e,t){return t||(t=pageContext.defaultDatetimeFormat||"HH:mm:ss"),formatters.formatDate(e,t)},parseDate:function(e,t){return e?moment(e,t||pageContext.defaultDateFormat||"YYYY-MM-DD",!0).toDate():e}},Utils=function(){function e(t,n,a){var r;if($.isArray(n))$.each(n,function(n,r){o.test(t)?a(t,r):e(t+"["+("object"==typeof r&&null!=r?n:"")+"]",r,a)});else if("object"===$.type(n))for(r in n)e((t?t+".":"")+r,n[r],a);else a(t,n)}function t(t){var n,a={},r=function(e,t){var n=$.isFunction(t)?t():t;a[e]=n};if($.isArray(t)||t.jquery&&!$.isPlainObject(t))$.each(t,function(){r(this.name,this.value)});else if($.isPlainObject(t))for(n in t)e(n,t[n],r);return a}function n(e){return void 0==e||null==e?"":"string"==typeof e?e:"toJSON"in e?e.toJSON():"toString"in e?e.toString():e+""}function a(e){var t=[];return $.isPlainObject(e)&&$.each(e,function(e,a){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n(a)))}),t.join("&")}function r(e,t,n){if(e){if("string"==typeof e){var a=$(e);if(a.size()||(a=$("#"+e)),e=a,!e.size())return}var r=e.data("_maskit");if(r||(r=e.children().length?$('<div class="maskit"></div>').hide().appendTo(e):$('<div class="maskit"></div>').hide().insertAfter(e),e.data("_maskit",r)),!n&&!i){var o=$.fn.datagrid.defaults.loadMsg||"正在处理，请稍待。。。";i=$("<div></div>").attr("class","maskit-msg").hide().text(o),i.appendTo("body")}if(void 0===t)return!1;if(t){e.find(".easyui-linkbutton").attr("masking",!0);var s=e.offset(),d=e.css("z-index");$.isNumeric(d)&&(d=parseInt(d)+10);var l=e.outerHeight()+"px";r.css({zIndex:d,left:s.left,top:s.top,width:e.outerWidth(),height:l,"line-height":l}).show(),n||i.show()}else r.hide(),!n&&i&&i.hide(),e.find(".easyui-linkbutton").removeAttr("masking")}}var i,o=/\[\]$/;return{paramObject:t,paramStr:a,maskit:r,getUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},parseJSON:function(e){return"string"==typeof e?JSON.parse(e):e},getJquery:function(e){var t=$(e);return t.length?t:document.getElementById(e)?$("#"+e):null},htmlencode:function(e){return $("<div></div>").text(e).html()},htmldecode:function(e){return $("<div></div>").html(e).text()}}};$.extend(!0,fmx,{CommonExporter:CommonExporter,CommonQueryService:CommonQueryService,mergeSelectCodeValue:mergeSelectCodeValue,mergeSelectCodeValues:mergeSelectCodeValues,getSelectCodeOpts:getSelectCodeOpts,getSelectCodeDatas:getSelectCodeDatas,getSelectCodeValues:getSelectCodeValues,getSelectCodeValue:getSelectCodeValue,textSelected:textSelected,checkFunctionAuthorization:checkFunctionAuthorization,formatters:formatters,utils:new Utils,getI18nTitle:getI18nTitle})}(jQuery,fmx),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return ha.apply(null,arguments)}function t(e){ha=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){var t;for(t in e)return!1;return!0}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,a){return gt(e,t,n,a,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(e){return null==e._pf&&(e._pf=u()),e._pf}function f(e){if(null==e._isValid){var t=c(e),n=ma.call(t.parsedDateParts,function(e){return null!=e}),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function h(e){var t=l(NaN);return null!=e?d(c(t),e):c(t).userInvalidated=!0,t}function m(e){return void 0===e}function p(e,t){var n,a,r;if(m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=c(t)),m(t._locale)||(e._locale=t._locale),pa.length>0)for(n in pa)a=pa[n],r=t[a],m(r)||(e[a]=r);return e}function g(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),ga===!1&&(ga=!0,e.updateOffset(this),ga=!1)}function v(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=y(t)),n}function x(e,t,n){var a,r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&b(e[a])!==b(t[a]))&&o++;return o+i}function w(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function _(t,n){var a=!0;return d(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),a){for(var r,i=[],o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){r+="\n["+o+"] ";for(var s in arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[o];i.push(r)}w(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),a=!1}return n.apply(this,arguments)},n)}function C(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),va[t]||(w(n),va[t]=!0)}function S(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function $(e){var t,n;for(n in e)t=e[n],S(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function k(e,t){var n,r=d({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(r[n]=d({},r[n]));return r}function O(e){null!=e&&this.set(e)}function T(e,t,n){var a=this._calendar[e]||this._calendar.sameElse;return S(a)?a.call(t,n):a}function D(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function M(){return this._invalidDate}function F(e){return this._ordinal.replace("%d",e)}function E(e,t,n,a){var r=this._relativeTime[n];return S(r)?r(e,t,n,a):r.replace(/%d/i,e)}function P(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)}function R(e,t){var n=e.toLowerCase();ka[n]=ka[n+"s"]=ka[t]=e}function Y(e){return"string"==typeof e?ka[e]||ka[e.toLowerCase()]:void 0}function A(e){var t,n,a={};for(n in e)s(e,n)&&(t=Y(n),t&&(a[t]=e[n]));return a}function N(e,t){Oa[e]=t}function V(e){var t=[];for(var n in e)t.push({unit:n,priority:Oa[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function L(t,n){return function(a){return null!=a?(j(this,t,a),e.updateOffset(this,n),this):I(this,t)}}function I(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function j(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function q(e){return e=Y(e),S(this[e])?this[e]():this}function z(e,t){if("object"==typeof e){e=A(e);for(var n=V(e),a=0;a<n.length;a++)this[n[a].unit](e[n[a].unit])}else if(e=Y(e),S(this[e]))return this[e](t);return this}function H(e,t,n){var a=""+Math.abs(e),r=t-a.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}function W(e,t,n,a){var r=a;"string"==typeof a&&(r=function(){return this[a]()}),e&&(Fa[e]=r),t&&(Fa[t[0]]=function(){return H(r.apply(this,arguments),t[1],t[2])}),n&&(Fa[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Q(e){var t,n,a=e.match(Ta);for(t=0,n=a.length;t<n;t++)Fa[a[t]]?a[t]=Fa[a[t]]:a[t]=U(a[t]);return function(t){var r,i="";for(r=0;r<n;r++)i+=a[r]instanceof Function?a[r].call(t,e):a[r];return i}}function B(e,t){return e.isValid()?(t=G(t,e.localeData()),Ma[t]=Ma[t]||Q(t),Ma[t](e)):e.localeData().invalidDate()}function G(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(Da.lastIndex=0;a>=0&&Da.test(e);)e=e.replace(Da,n),Da.lastIndex=0,a-=1;return e}function J(e,t,n){Ga[e]=S(t)?t:function(e,a){return e&&n?n:t}}function Z(e,t){return s(Ga,e)?Ga[e](t._strict,t._locale):new RegExp(K(e))}function K(e){return X(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,r){return t||n||a||r}))}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ee(e,t){var n,a=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(a=function(e,n){n[t]=b(e)}),n=0;n<e.length;n++)Ja[e[n]]=a}function te(e,t){ee(e,function(e,n,a,r){a._w=a._w||{},t(e,a._w,a,r)})}function ne(e,t,n){null!=t&&s(Ja,e)&&Ja[e](t,n._a,n,e)}function ae(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function re(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||or).test(t)?"format":"standalone"][e.month()]:this._months}function ie(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[or.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function oe(e,t,n){var a,r,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=l([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?(r=ba.call(this._shortMonthsParse,o),r!==-1?r:null):(r=ba.call(this._longMonthsParse,o),r!==-1?r:null):"MMM"===t?(r=ba.call(this._shortMonthsParse,o),r!==-1?r:(r=ba.call(this._longMonthsParse,o),r!==-1?r:null)):(r=ba.call(this._longMonthsParse,o),r!==-1?r:(r=ba.call(this._shortMonthsParse,o),r!==-1?r:null))}function se(e,t,n){var a,r,i;if(this._monthsParseExact)return oe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(r=l([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}}function de(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return n=Math.min(e.date(),ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function le(t){return null!=t?(de(this,t),e.updateOffset(this,!0),this):I(this,"Month")}function ue(){return ae(this.year(),this.month())}function ce(e){return this._monthsParseExact?(s(this,"_monthsRegex")||he.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=lr),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function fe(e){return this._monthsParseExact?(s(this,"_monthsRegex")||he.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=ur),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function he(){function e(e,t){return t.length-e.length}var t,n,a=[],r=[],i=[];for(t=0;t<12;t++)n=l([2e3,t]),a.push(this.monthsShort(n,"")),r.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(a.sort(e),r.sort(e),i.sort(e),t=0;t<12;t++)a[t]=X(a[t]),r[t]=X(r[t]);for(t=0;t<24;t++)i[t]=X(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function me(e){return pe(e)?366:365}function pe(e){return e%4===0&&e%100!==0||e%400===0}function ge(){return pe(this.year())}function ve(e,t,n,a,r,i,o){var s=new Date(e,t,n,a,r,i,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function ye(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function be(e,t,n){var a=7+t-n,r=(7+ye(e,0,a).getUTCDay()-t)%7;return-r+a-1}function xe(e,t,n,a,r){var i,o,s=(7+n-a)%7,d=be(e,a,r),l=1+7*(t-1)+s+d;return l<=0?(i=e-1,o=me(i)+l):l>me(e)?(i=e+1,o=l-me(e)):(i=e,o=l),{year:i,dayOfYear:o}}function we(e,t,n){var a,r,i=be(e.year(),t,n),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?(r=e.year()-1,a=o+_e(r,t,n)):o>_e(e.year(),t,n)?(a=o-_e(e.year(),t,n),r=e.year()+1):(r=e.year(),a=o),{week:a,year:r}}function _e(e,t,n){var a=be(e,t,n),r=be(e+1,t,n);return(me(e)-a+r)/7}function Ce(e){return we(e,this._week.dow,this._week.doy).week}function Se(){return this._week.dow}function $e(){return this._week.doy}function ke(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Oe(e){var t=we(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Te(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function De(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Me(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Fe(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ee(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Pe(e,t,n){var a,r,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=l([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?(r=ba.call(this._weekdaysParse,o),r!==-1?r:null):"ddd"===t?(r=ba.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=ba.call(this._minWeekdaysParse,o),r!==-1?r:null):"dddd"===t?(r=ba.call(this._weekdaysParse,o),r!==-1?r:(r=ba.call(this._shortWeekdaysParse,o),r!==-1?r:(r=ba.call(this._minWeekdaysParse,o),r!==-1?r:null))):"ddd"===t?(r=ba.call(this._shortWeekdaysParse,o),r!==-1?r:(r=ba.call(this._weekdaysParse,o),r!==-1?r:(r=ba.call(this._minWeekdaysParse,o),r!==-1?r:null))):(r=ba.call(this._minWeekdaysParse,o),r!==-1?r:(r=ba.call(this._weekdaysParse,o),r!==-1?r:(r=ba.call(this._shortWeekdaysParse,o),r!==-1?r:null)))}function Re(e,t,n){var a,r,i;if(this._weekdaysParseExact)return Pe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(r=l([2e3,1]).day(a),n&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[a].test(e))return a;if(n&&"ddd"===t&&this._shortWeekdaysParse[a].test(e))return a;if(n&&"dd"===t&&this._minWeekdaysParse[a].test(e))return a;if(!n&&this._weekdaysParse[a].test(e))return a}}function Ye(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Te(e,this.localeData()),this.add(e-t,"d")):t}function Ae(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ne(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=De(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ve(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=gr),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Le(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=vr),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ie(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=yr),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function je(){function e(e,t){return t.length-e.length}var t,n,a,r,i,o=[],s=[],d=[],u=[];for(t=0;t<7;t++)n=l([2e3,1]).day(t),a=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),i=this.weekdays(n,""),o.push(a),s.push(r),d.push(i),u.push(a),u.push(r),u.push(i);for(o.sort(e),s.sort(e),d.sort(e),u.sort(e),t=0;t<7;t++)s[t]=X(s[t]),d[t]=X(d[t]),u[t]=X(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qe(){return this.hours()%12||12}function ze(){return this.hours()||24}function He(e,t){W(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function We(e,t){return t._meridiemParse}function Ue(e){return"p"===(e+"").toLowerCase().charAt(0)}function Qe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Be(e){return e?e.toLowerCase().replace("_","-"):e}function Ge(e){for(var t,n,a,r,i=0;i<e.length;){for(r=Be(e[i]).split("-"),t=r.length,n=Be(e[i+1]),n=n?n.split("-"):null;t>0;){if(a=Je(r.slice(0,t).join("-")))return a;if(n&&n.length>=t&&x(r,n,!0)>=t-1)break;t--}i++}return null}function Je(e){var t=null;if(!Cr[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=br._abbr,require("./locale/"+e),Ze(t)}catch(e){}return Cr[e]}function Ze(e,t){var n;return e&&(n=m(t)?et(e):Ke(e,t),n&&(br=n)),br._abbr}function Ke(e,t){if(null!==t){var n=_r;return t.abbr=e,null!=Cr[e]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Cr[e]._config):null!=t.parentLocale&&(null!=Cr[t.parentLocale]?n=Cr[t.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Cr[e]=new O(k(n,t)),Ze(e),Cr[e]}return delete Cr[e],null}function Xe(e,t){if(null!=t){var n,a=_r;null!=Cr[e]&&(a=Cr[e]._config),t=k(a,t),n=new O(t),n.parentLocale=Cr[e],Cr[e]=n,Ze(e)}else null!=Cr[e]&&(null!=Cr[e].parentLocale?Cr[e]=Cr[e].parentLocale:null!=Cr[e]&&delete Cr[e]);return Cr[e]}function et(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return br;if(!n(e)){if(t=Je(e))return t;e=[e]}return Ge(e)}function tt(){return ya(Cr)}function nt(e){var t,n=e._a;return n&&c(e).overflow===-2&&(t=n[Ka]<0||n[Ka]>11?Ka:n[Xa]<1||n[Xa]>ae(n[Za],n[Ka])?Xa:n[er]<0||n[er]>24||24===n[er]&&(0!==n[tr]||0!==n[nr]||0!==n[ar])?er:n[tr]<0||n[tr]>59?tr:n[nr]<0||n[nr]>59?nr:n[ar]<0||n[ar]>999?ar:-1,c(e)._overflowDayOfYear&&(t<Za||t>Xa)&&(t=Xa),c(e)._overflowWeeks&&t===-1&&(t=rr),c(e)._overflowWeekday&&t===-1&&(t=ir),c(e).overflow=t),e}function at(e){var t,n,a,r,i,o,s=e._i,d=Sr.exec(s)||$r.exec(s);if(d){for(c(e).iso=!0,t=0,n=Or.length;t<n;t++)if(Or[t][1].exec(d[1])){r=Or[t][0],a=Or[t][2]!==!1;break}if(null==r)return void(e._isValid=!1);if(d[3]){for(t=0,n=Tr.length;t<n;t++)if(Tr[t][1].exec(d[3])){i=(d[2]||" ")+Tr[t][0];break}if(null==i)return void(e._isValid=!1)}if(!a&&null!=i)return void(e._isValid=!1);if(d[4]){if(!kr.exec(d[4]))return void(e._isValid=!1);o="Z"}e._f=r+(i||"")+(o||""),lt(e)}else e._isValid=!1}function rt(t){var n=Dr.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(at(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function it(e,t,n){return null!=e?e:null!=t?t:n}function ot(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function st(e){var t,n,a,r,i=[];if(!e._d){for(a=ot(e),e._w&&null==e._a[Xa]&&null==e._a[Ka]&&dt(e),e._dayOfYear&&(r=it(e._a[Za],a[Za]),e._dayOfYear>me(r)&&(c(e)._overflowDayOfYear=!0),n=ye(r,0,e._dayOfYear),e._a[Ka]=n.getUTCMonth(),e._a[Xa]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=a[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[er]&&0===e._a[tr]&&0===e._a[nr]&&0===e._a[ar]&&(e._nextDay=!0,e._a[er]=0),e._d=(e._useUTC?ye:ve).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[er]=24)}}function dt(e){var t,n,a,r,i,o,s,d;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(i=1,o=4,n=it(t.GG,e._a[Za],we(vt(),1,4).year),a=it(t.W,1),r=it(t.E,1),(r<1||r>7)&&(d=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,n=it(t.gg,e._a[Za],we(vt(),i,o).year),a=it(t.w,1),null!=t.d?(r=t.d,(r<0||r>6)&&(d=!0)):null!=t.e?(r=t.e+i,(t.e<0||t.e>6)&&(d=!0)):r=i),a<1||a>_e(n,i,o)?c(e)._overflowWeeks=!0:null!=d?c(e)._overflowWeekday=!0:(s=xe(n,a,r,i,o),e._a[Za]=s.year,e._dayOfYear=s.dayOfYear)}function lt(t){if(t._f===e.ISO_8601)return void at(t);t._a=[],c(t).empty=!0;var n,a,r,i,o,s=""+t._i,d=s.length,l=0;for(r=G(t._f,t._locale).match(Ta)||[],n=0;n<r.length;n++)i=r[n],a=(s.match(Z(i,t))||[])[0],a&&(o=s.substr(0,s.indexOf(a)),o.length>0&&c(t).unusedInput.push(o),s=s.slice(s.indexOf(a)+a.length),l+=a.length),Fa[i]?(a?c(t).empty=!1:c(t).unusedTokens.push(i),ne(i,a,t)):t._strict&&!a&&c(t).unusedTokens.push(i);c(t).charsLeftOver=d-l,s.length>0&&c(t).unusedInput.push(s),t._a[er]<=12&&c(t).bigHour===!0&&t._a[er]>0&&(c(t).bigHour=void 0),c(t).parsedDateParts=t._a.slice(0),c(t).meridiem=t._meridiem,t._a[er]=ut(t._locale,t._a[er],t._meridiem),st(t),nt(t)}function ut(e,t,n){var a;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(a=e.isPM(n),a&&t<12&&(t+=12),a||12!==t||(t=0),t):t}function ct(e){var t,n,a,r,i;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)i=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],lt(t),f(t)&&(i+=c(t).charsLeftOver,i+=10*c(t).unusedTokens.length,c(t).score=i,(null==a||i<a)&&(a=i,n=t));d(e,n||t)}function ft(e){if(!e._d){var t=A(e._i);e._a=o([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),st(e)}}function ht(e){var t=new g(nt(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function mt(e){var t=e._i,a=e._f;return e._locale=e._locale||et(e._l),null===t||void 0===a&&""===t?h({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new g(nt(t)):(n(a)?ct(e):i(t)?e._d=t:a?lt(e):pt(e),f(e)||(e._d=null),e))}function pt(t){var a=t._i;void 0===a?t._d=new Date(e.now()):i(a)?t._d=new Date(a.valueOf()):"string"==typeof a?rt(t):n(a)?(t._a=o(a.slice(0),function(e){return parseInt(e,10)}),st(t)):"object"==typeof a?ft(t):"number"==typeof a?t._d=new Date(a):e.createFromInputFallback(t)}function gt(e,t,i,o,s){var d={};return"boolean"==typeof i&&(o=i,i=void 0),(a(e)&&r(e)||n(e)&&0===e.length)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=s,d._l=i,d._i=e,d._f=t,d._strict=o,ht(d)}function vt(e,t,n,a){return gt(e,t,n,a,!1)}function yt(e,t){var a,r;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return vt();for(a=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](a)||(a=t[r]);return a}function bt(){var e=[].slice.call(arguments,0);return yt("isBefore",e)}function xt(){var e=[].slice.call(arguments,0);return yt("isAfter",e)}function wt(e){var t=A(e),n=t.year||0,a=t.quarter||0,r=t.month||0,i=t.week||0,o=t.day||0,s=t.hour||0,d=t.minute||0,l=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*l+6e4*d+1e3*s*60*60,this._days=+o+7*i,this._months=+r+3*a+12*n,this._data={},this._locale=et(),this._bubble()}function _t(e){return e instanceof wt}function Ct(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function St(e,t){W(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+H(~~(e/60),2)+t+H(~~e%60,2)})}function $t(e,t){var n=(t||"").match(e)||[],a=n[n.length-1]||[],r=(a+"").match(Pr)||["-",0,0],i=+(60*r[1])+b(r[2]);return"+"===r[0]?i:-i}function kt(t,n){var a,r;return n._isUTC?(a=n.clone(),r=(v(t)||i(t)?t.valueOf():vt(t).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+r),e.updateOffset(a,!1),a):vt(t).local()}function Ot(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Tt(t,n){var a,r=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=$t(Ua,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(a=Ot(this)),this._offset=t,this._isUTC=!0,null!=a&&this.add(a,"m"),r!==t&&(!n||this._changeInProgress?Ht(this,Lt(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Ot(this):null!=t?this:NaN}function Dt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Mt(e){return this.utcOffset(0,e)}function Ft(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ot(this),"m")),this}function Et(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){
var e=$t(Wa,this._i);0===e?this.utcOffset(0,!0):this.utcOffset($t(Wa,this._i))}return this}function Pt(e){return!!this.isValid()&&(e=e?vt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Rt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=mt(e),e._a){var t=e._isUTC?l(e._a):vt(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function At(){return!!this.isValid()&&!this._isUTC}function Nt(){return!!this.isValid()&&this._isUTC}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Lt(e,t){var n,a,r,i=e,o=null;return _t(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(i={},t?i[t]=e:i.milliseconds=e):(o=Rr.exec(e))?(n="-"===o[1]?-1:1,i={y:0,d:b(o[Xa])*n,h:b(o[er])*n,m:b(o[tr])*n,s:b(o[nr])*n,ms:b(Ct(1e3*o[ar]))*n}):(o=Yr.exec(e))?(n="-"===o[1]?-1:1,i={y:It(o[2],n),M:It(o[3],n),w:It(o[4],n),d:It(o[5],n),h:It(o[6],n),m:It(o[7],n),s:It(o[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(r=qt(vt(i.from),vt(i.to)),i={},i.ms=r.milliseconds,i.M=r.months),a=new wt(i),_t(e)&&s(e,"_locale")&&(a._locale=e._locale),a}function It(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function jt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){var n;return e.isValid()&&t.isValid()?(t=kt(t,e),e.isBefore(t)?n=jt(e,t):(n=jt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function zt(e,t){return function(n,a){var r,i;return null===a||isNaN(+a)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=a,a=i),n="string"==typeof n?+n:n,r=Lt(n,a),Ht(this,r,e),this}}function Ht(t,n,a,r){var i=n._milliseconds,o=Ct(n._days),s=Ct(n._months);t.isValid()&&(r=null==r||r,i&&t._d.setTime(t._d.valueOf()+i*a),o&&j(t,"Date",I(t,"Date")+o*a),s&&de(t,I(t,"Month")+s*a),r&&e.updateOffset(t,o||s))}function Wt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ut(t,n){var a=t||vt(),r=kt(a,this).startOf("day"),i=e.calendarFormat(this,r)||"sameElse",o=n&&(S(n[i])?n[i].call(this,a):n[i]);return this.format(o||this.localeData().calendar(i,this,vt(a)))}function Qt(){return new g(this)}function Bt(e,t){var n=v(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=Y(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Gt(e,t){var n=v(e)?e:vt(e);return!(!this.isValid()||!n.isValid())&&(t=Y(m(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Jt(e,t,n,a){return a=a||"()",("("===a[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===a[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Zt(e,t){var n,a=v(e)?e:vt(e);return!(!this.isValid()||!a.isValid())&&(t=Y(t||"millisecond"),"millisecond"===t?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Kt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function en(e,t,n){var a,r,i,o;return this.isValid()?(a=kt(e,this),a.isValid()?(r=6e4*(a.utcOffset()-this.utcOffset()),t=Y(t),"year"===t||"month"===t||"quarter"===t?(o=tn(this,a),"quarter"===t?o/=3:"year"===t&&(o/=12)):(i=this-a,o="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?o:y(o)):NaN):NaN}function tn(e,t){var n,a,r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return t-i<0?(n=e.clone().add(r-1,"months"),a=(t-i)/(i-n)):(n=e.clone().add(r+1,"months"),a=(t-i)/(n-i)),-(r+a)||0}function nn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function an(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function rn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=B(this,t);return this.localeData().postformat(n)}function on(e,t){return this.isValid()&&(v(e)&&e.isValid()||vt(e).isValid())?Lt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sn(e){return this.from(vt(),e)}function dn(e,t){return this.isValid()&&(v(e)&&e.isValid()||vt(e).isValid())?Lt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ln(e){return this.to(vt(),e)}function un(e){var t;return void 0===e?this._locale._abbr:(t=et(e),null!=t&&(this._locale=t),this)}function cn(){return this._locale}function fn(e){switch(e=Y(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function hn(e){return e=Y(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function mn(){return this._d.valueOf()-6e4*(this._offset||0)}function pn(){return Math.floor(this.valueOf()/1e3)}function gn(){return new Date(this.valueOf())}function vn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function yn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function bn(){return this.isValid()?this.toISOString():null}function xn(){return f(this)}function wn(){return d({},c(this))}function _n(){return c(this).overflow}function Cn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Sn(e,t){W(0,[e,e.length],0,t)}function $n(e){return Dn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function kn(e){return Dn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function On(){return _e(this.year(),1,4)}function Tn(){var e=this.localeData()._week;return _e(this.year(),e.dow,e.doy)}function Dn(e,t,n,a,r){var i;return null==e?we(this,a,r).year:(i=_e(e,a,r),t>i&&(t=i),Mn.call(this,e,t,n,a,r))}function Mn(e,t,n,a,r){var i=xe(e,t,n,a,r),o=ye(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Fn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function En(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Pn(e,t){t[ar]=b(1e3*("0."+e))}function Rn(){return this._isUTC?"UTC":""}function Yn(){return this._isUTC?"Coordinated Universal Time":""}function An(e){return vt(1e3*e)}function Nn(){return vt.apply(null,arguments).parseZone()}function Vn(e){return e}function Ln(e,t,n,a){var r=et(),i=l().set(a,t);return r[n](i,e)}function In(e,t,n){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return Ln(e,t,n,"month");var a,r=[];for(a=0;a<12;a++)r[a]=Ln(e,a,n,"month");return r}function jn(e,t,n,a){"boolean"==typeof e?("number"==typeof t&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,"number"==typeof t&&(n=t,t=void 0),t=t||"");var r=et(),i=e?r._week.dow:0;if(null!=n)return Ln(t,(n+i)%7,a,"day");var o,s=[];for(o=0;o<7;o++)s[o]=Ln(t,(o+i)%7,a,"day");return s}function qn(e,t){return In(e,t,"months")}function zn(e,t){return In(e,t,"monthsShort")}function Hn(e,t,n){return jn(e,t,n,"weekdays")}function Wn(e,t,n){return jn(e,t,n,"weekdaysShort")}function Un(e,t,n){return jn(e,t,n,"weekdaysMin")}function Qn(){var e=this._data;return this._milliseconds=Qr(this._milliseconds),this._days=Qr(this._days),this._months=Qr(this._months),e.milliseconds=Qr(e.milliseconds),e.seconds=Qr(e.seconds),e.minutes=Qr(e.minutes),e.hours=Qr(e.hours),e.months=Qr(e.months),e.years=Qr(e.years),this}function Bn(e,t,n,a){var r=Lt(t,n);return e._milliseconds+=a*r._milliseconds,e._days+=a*r._days,e._months+=a*r._months,e._bubble()}function Gn(e,t){return Bn(this,e,t,1)}function Jn(e,t){return Bn(this,e,t,-1)}function Zn(e){return e<0?Math.floor(e):Math.ceil(e)}function Kn(){var e,t,n,a,r,i=this._milliseconds,o=this._days,s=this._months,d=this._data;return i>=0&&o>=0&&s>=0||i<=0&&o<=0&&s<=0||(i+=864e5*Zn(ea(s)+o),o=0,s=0),d.milliseconds=i%1e3,e=y(i/1e3),d.seconds=e%60,t=y(e/60),d.minutes=t%60,n=y(t/60),d.hours=n%24,o+=y(n/24),r=y(Xn(o)),s+=r,o-=Zn(ea(r)),a=y(s/12),s%=12,d.days=o,d.months=s,d.years=a,this}function Xn(e){return 4800*e/146097}function ea(e){return 146097*e/4800}function ta(e){var t,n,a=this._milliseconds;if(e=Y(e),"month"===e||"year"===e)return t=this._days+a/864e5,n=this._months+Xn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ea(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}}function na(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)}function aa(e){return function(){return this.as(e)}}function ra(e){return e=Y(e),this[e+"s"]()}function ia(e){return function(){return this._data[e]}}function oa(){return y(this.days()/7)}function sa(e,t,n,a,r){return r.relativeTime(t||1,!!n,e,a)}function da(e,t,n){var a=Lt(e).abs(),r=li(a.as("s")),i=li(a.as("m")),o=li(a.as("h")),s=li(a.as("d")),d=li(a.as("M")),l=li(a.as("y")),u=r<ui.s&&["s",r]||i<=1&&["m"]||i<ui.m&&["mm",i]||o<=1&&["h"]||o<ui.h&&["hh",o]||s<=1&&["d"]||s<ui.d&&["dd",s]||d<=1&&["M"]||d<ui.M&&["MM",d]||l<=1&&["y"]||["yy",l];return u[2]=t,u[3]=+e>0,u[4]=n,sa.apply(null,u)}function la(e){return void 0===e?li:"function"==typeof e&&(li=e,!0)}function ua(e,t){return void 0!==ui[e]&&(void 0===t?ui[e]:(ui[e]=t,!0))}function ca(e){var t=this.localeData(),n=da(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function fa(){var e,t,n,a=ci(this._milliseconds)/1e3,r=ci(this._days),i=ci(this._months);e=y(a/60),t=y(e/60),a%=60,e%=60,n=y(i/12),i%=12;var o=n,s=i,d=r,l=t,u=e,c=a,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(o?o+"Y":"")+(s?s+"M":"")+(d?d+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var ha,ma;ma=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,a=0;a<n;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};var pa=e.momentProperties=[],ga=!1,va={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var ya;ya=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var ba,xa={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},wa={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},_a="Invalid date",Ca="%d",Sa=/\d{1,2}/,$a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ka={},Oa={},Ta=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Da=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ma={},Fa={},Ea=/\d/,Pa=/\d\d/,Ra=/\d{3}/,Ya=/\d{4}/,Aa=/[+-]?\d{6}/,Na=/\d\d?/,Va=/\d\d\d\d?/,La=/\d\d\d\d\d\d?/,Ia=/\d{1,3}/,ja=/\d{1,4}/,qa=/[+-]?\d{1,6}/,za=/\d+/,Ha=/[+-]?\d+/,Wa=/Z|[+-]\d\d:?\d\d/gi,Ua=/Z|[+-]\d\d(?::?\d\d)?/gi,Qa=/[+-]?\d+(\.\d{1,3})?/,Ba=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ga={},Ja={},Za=0,Ka=1,Xa=2,er=3,tr=4,nr=5,ar=6,rr=7,ir=8;ba=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),W("MMMM",0,0,function(e){return this.localeData().months(this,e)}),R("month","M"),N("month",8),J("M",Na),J("MM",Na,Pa),J("MMM",function(e,t){return t.monthsShortRegex(e)}),J("MMMM",function(e,t){return t.monthsRegex(e)}),ee(["M","MM"],function(e,t){t[Ka]=b(e)-1}),ee(["MMM","MMMM"],function(e,t,n,a){var r=n._locale.monthsParse(e,a,n._strict);null!=r?t[Ka]=r:c(n).invalidMonth=e});var or=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,sr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lr=Ba,ur=Ba;W("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),R("year","y"),N("year",1),J("Y",Ha),J("YY",Na,Pa),J("YYYY",ja,Ya),J("YYYYY",qa,Aa),J("YYYYYY",qa,Aa),ee(["YYYYY","YYYYYY"],Za),ee("YYYY",function(t,n){n[Za]=2===t.length?e.parseTwoDigitYear(t):b(t)}),ee("YY",function(t,n){n[Za]=e.parseTwoDigitYear(t)}),ee("Y",function(e,t){t[Za]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var cr=L("FullYear",!0);W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),N("week",5),N("isoWeek",5),J("w",Na),J("ww",Na,Pa),J("W",Na),J("WW",Na,Pa),te(["w","ww","W","WW"],function(e,t,n,a){t[a.substr(0,1)]=b(e)});var fr={dow:0,doy:6};W("d",0,"do","day"),W("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),W("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),W("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),J("d",Na),J("e",Na),J("E",Na),J("dd",function(e,t){return t.weekdaysMinRegex(e)}),J("ddd",function(e,t){return t.weekdaysShortRegex(e)}),J("dddd",function(e,t){return t.weekdaysRegex(e)}),te(["dd","ddd","dddd"],function(e,t,n,a){var r=n._locale.weekdaysParse(e,a,n._strict);null!=r?t.d=r:c(n).invalidWeekday=e}),te(["d","e","E"],function(e,t,n,a){t[a]=b(e)});var hr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),mr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),pr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),gr=Ba,vr=Ba,yr=Ba;W("H",["HH",2],0,"hour"),W("h",["hh",2],0,qe),W("k",["kk",2],0,ze),W("hmm",0,0,function(){return""+qe.apply(this)+H(this.minutes(),2)}),W("hmmss",0,0,function(){return""+qe.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),He("a",!0),He("A",!1),R("hour","h"),N("hour",13),J("a",We),J("A",We),J("H",Na),J("h",Na),J("HH",Na,Pa),J("hh",Na,Pa),J("hmm",Va),J("hmmss",La),J("Hmm",Va),J("Hmmss",La),ee(["H","HH"],er),ee(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ee(["h","hh"],function(e,t,n){t[er]=b(e),c(n).bigHour=!0}),ee("hmm",function(e,t,n){var a=e.length-2;t[er]=b(e.substr(0,a)),t[tr]=b(e.substr(a)),c(n).bigHour=!0}),ee("hmmss",function(e,t,n){var a=e.length-4,r=e.length-2;t[er]=b(e.substr(0,a)),t[tr]=b(e.substr(a,2)),t[nr]=b(e.substr(r)),c(n).bigHour=!0}),ee("Hmm",function(e,t,n){var a=e.length-2;t[er]=b(e.substr(0,a)),t[tr]=b(e.substr(a))}),ee("Hmmss",function(e,t,n){var a=e.length-4,r=e.length-2;t[er]=b(e.substr(0,a)),t[tr]=b(e.substr(a,2)),t[nr]=b(e.substr(r))});var br,xr=/[ap]\.?m?\.?/i,wr=L("Hours",!0),_r={calendar:xa,longDateFormat:wa,invalidDate:_a,ordinal:Ca,ordinalParse:Sa,relativeTime:$a,months:sr,monthsShort:dr,week:fr,weekdays:hr,weekdaysMin:pr,weekdaysShort:mr,meridiemParse:xr},Cr={},Sr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,$r=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,kr=/Z|[+-]\d\d(?::?\d\d)?/,Or=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Tr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dr=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=_("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Mr=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),Fr=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=vt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),Er=function(){return Date.now?Date.now():+new Date};St("Z",":"),St("ZZ",""),J("Z",Ua),J("ZZ",Ua),ee(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=$t(Ua,e)});var Pr=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Rr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yr=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Lt.fn=wt.prototype;var Ar=zt(1,"add"),Nr=zt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Vr=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Sn("gggg","weekYear"),Sn("ggggg","weekYear"),Sn("GGGG","isoWeekYear"),Sn("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),J("G",Ha),J("g",Ha),J("GG",Na,Pa),J("gg",Na,Pa),J("GGGG",ja,Ya),J("gggg",ja,Ya),J("GGGGG",qa,Aa),J("ggggg",qa,Aa),te(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,a){t[a.substr(0,2)]=b(e)}),te(["gg","GG"],function(t,n,a,r){n[r]=e.parseTwoDigitYear(t)}),W("Q",0,"Qo","quarter"),R("quarter","Q"),N("quarter",7),J("Q",Ea),ee("Q",function(e,t){t[Ka]=3*(b(e)-1)}),W("D",["DD",2],"Do","date"),R("date","D"),N("date",9),J("D",Na),J("DD",Na,Pa),J("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ee(["D","DD"],Xa),ee("Do",function(e,t){t[Xa]=b(e.match(Na)[0],10)});var Lr=L("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),N("dayOfYear",4),J("DDD",Ia),J("DDDD",Ra),ee(["DDD","DDDD"],function(e,t,n){n._dayOfYear=b(e)}),W("m",["mm",2],0,"minute"),R("minute","m"),N("minute",14),J("m",Na),J("mm",Na,Pa),ee(["m","mm"],tr);var Ir=L("Minutes",!1);W("s",["ss",2],0,"second"),R("second","s"),N("second",15),J("s",Na),J("ss",Na,Pa),ee(["s","ss"],nr);var jr=L("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),R("millisecond","ms"),N("millisecond",16),J("S",Ia,Ea),J("SS",Ia,Pa),J("SSS",Ia,Ra);var qr;for(qr="SSSS";qr.length<=9;qr+="S")J(qr,za);for(qr="S";qr.length<=9;qr+="S")ee(qr,Pn);var zr=L("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var Hr=g.prototype;Hr.add=Ar,Hr.calendar=Ut,Hr.clone=Qt,Hr.diff=en,Hr.endOf=hn,Hr.format=rn,Hr.from=on,Hr.fromNow=sn,Hr.to=dn,Hr.toNow=ln,Hr.get=q,Hr.invalidAt=_n,Hr.isAfter=Bt,Hr.isBefore=Gt,Hr.isBetween=Jt,Hr.isSame=Zt,Hr.isSameOrAfter=Kt,Hr.isSameOrBefore=Xt,Hr.isValid=xn,Hr.lang=Vr,Hr.locale=un,Hr.localeData=cn,Hr.max=Fr,Hr.min=Mr,Hr.parsingFlags=wn,Hr.set=z,Hr.startOf=fn,Hr.subtract=Nr,Hr.toArray=vn,Hr.toObject=yn,Hr.toDate=gn,Hr.toISOString=an,Hr.toJSON=bn,Hr.toString=nn,Hr.unix=pn,Hr.valueOf=mn,Hr.creationData=Cn,Hr.year=cr,Hr.isLeapYear=ge,Hr.weekYear=$n,Hr.isoWeekYear=kn,Hr.quarter=Hr.quarters=Fn,Hr.month=le,Hr.daysInMonth=ue,Hr.week=Hr.weeks=ke,Hr.isoWeek=Hr.isoWeeks=Oe,Hr.weeksInYear=Tn,Hr.isoWeeksInYear=On,Hr.date=Lr,Hr.day=Hr.days=Ye,Hr.weekday=Ae,Hr.isoWeekday=Ne,Hr.dayOfYear=En,Hr.hour=Hr.hours=wr,Hr.minute=Hr.minutes=Ir,Hr.second=Hr.seconds=jr,Hr.millisecond=Hr.milliseconds=zr,Hr.utcOffset=Tt,Hr.utc=Mt,Hr.local=Ft,Hr.parseZone=Et,Hr.hasAlignedHourOffset=Pt,Hr.isDST=Rt,Hr.isLocal=At,Hr.isUtcOffset=Nt,Hr.isUtc=Vt,Hr.isUTC=Vt,Hr.zoneAbbr=Rn,Hr.zoneName=Yn,Hr.dates=_("dates accessor is deprecated. Use date instead.",Lr),Hr.months=_("months accessor is deprecated. Use month instead",le),Hr.years=_("years accessor is deprecated. Use year instead",cr),Hr.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Dt),Hr.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yt);var Wr=Hr,Ur=O.prototype;Ur.calendar=T,Ur.longDateFormat=D,Ur.invalidDate=M,Ur.ordinal=F,Ur.preparse=Vn,Ur.postformat=Vn,Ur.relativeTime=E,Ur.pastFuture=P,Ur.set=$,Ur.months=re,Ur.monthsShort=ie,Ur.monthsParse=se,Ur.monthsRegex=fe,Ur.monthsShortRegex=ce,Ur.week=Ce,Ur.firstDayOfYear=$e,Ur.firstDayOfWeek=Se,Ur.weekdays=Me,Ur.weekdaysMin=Ee,Ur.weekdaysShort=Fe,Ur.weekdaysParse=Re,Ur.weekdaysRegex=Ve,Ur.weekdaysShortRegex=Le,Ur.weekdaysMinRegex=Ie,Ur.isPM=Ue,Ur.meridiem=Qe,Ze("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=_("moment.lang is deprecated. Use moment.locale instead.",Ze),e.langData=_("moment.langData is deprecated. Use moment.localeData instead.",et);var Qr=Math.abs,Br=aa("ms"),Gr=aa("s"),Jr=aa("m"),Zr=aa("h"),Kr=aa("d"),Xr=aa("w"),ei=aa("M"),ti=aa("y"),ni=ia("milliseconds"),ai=ia("seconds"),ri=ia("minutes"),ii=ia("hours"),oi=ia("days"),si=ia("months"),di=ia("years"),li=Math.round,ui={s:45,m:45,h:22,d:26,M:11},ci=Math.abs,fi=wt.prototype;fi.abs=Qn,fi.add=Gn,fi.subtract=Jn,fi.as=ta,fi.asMilliseconds=Br,fi.asSeconds=Gr,fi.asMinutes=Jr,fi.asHours=Zr,fi.asDays=Kr,fi.asWeeks=Xr,fi.asMonths=ei,fi.asYears=ti,fi.valueOf=na,fi._bubble=Kn,fi.get=ra,fi.milliseconds=ni,fi.seconds=ai,fi.minutes=ri,fi.hours=ii,fi.days=oi,fi.weeks=oa,fi.months=si,fi.years=di,fi.humanize=ca,fi.toISOString=fa,fi.toString=fa,fi.toJSON=fa,fi.locale=un,fi.localeData=cn,fi.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fa),fi.lang=Vr,W("X",0,0,"unix"),W("x",0,0,"valueOf"),J("x",Ha),J("X",Qa),ee("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ee("x",function(e,t,n){n._d=new Date(b(e))}),e.version="2.15.1",t(vt),e.fn=Wr,e.min=bt,e.max=xt,e.now=Er,e.utc=l,e.unix=An,e.months=qn,e.isDate=i,e.locale=Ze,e.invalid=h,e.duration=Lt,e.isMoment=v,e.weekdays=Hn,e.parseZone=Nn,e.localeData=et,e.isDuration=_t,e.monthsShort=zn,e.weekdaysMin=Un,e.defineLocale=Ke,e.updateLocale=Xe,e.locales=tt,e.weekdaysShort=Wn,e.normalizeUnits=Y,e.relativeTimeRounding=la,e.relativeTimeThreshold=ua,e.calendarFormat=Wt,e.prototype=Wr;var hi=e;return hi}),function(){function e(e){this._value=e}function t(e,t,n,a){var r,i,o=Math.pow(10,t);return i=(n(e*o)/o).toFixed(t),a&&(r=new RegExp("0{1,"+a+"}$"),i=i.replace(r,"")),i}function n(e,t,n){var a;return a=t.indexOf("$")>-1?r(e,t,n):t.indexOf("%")>-1?i(e,t,n):t.indexOf(":")>-1?o(e,t):d(e._value,t,n)}function a(e,t){var n,a,r,i,o,d=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(t.indexOf(":")>-1)e._value=s(t);else if(t===g)e._value=0;else{for("."!==m[p].delimiters.decimal&&(t=t.replace(/\./g,"").replace(m[p].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+m[p].abbreviations.thousand+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+m[p].abbreviations.million+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+m[p].abbreviations.billion+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+m[p].abbreviations.trillion+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),o=0;o<=l.length&&!(u=t.indexOf(l[o])>-1&&Math.pow(1024,o+1));o++);e._value=(u?u:1)*(d.match(n)?Math.pow(10,3):1)*(d.match(a)?Math.pow(10,6):1)*(d.match(r)?Math.pow(10,9):1)*(d.match(i)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=u?Math.ceil(e._value):e._value}return e._value}function r(e,t,n){var a,r,i=t.indexOf("$"),o=t.indexOf("("),s=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),r=d(e._value,t,n),1>=i?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),a=1,(o>i||s>i)&&(a=0),r.splice(a,0,m[p].currency.symbol+l),r=r.join("")):r=m[p].currency.symbol+l+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,l+m[p].currency.symbol),r=r.join("")):r=r+l+m[p].currency.symbol,r}function i(e,t,n){var a,r="",i=100*e._value;return t.indexOf(" %")>-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),a=d(i,t,n),a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,r+"%"),a=a.join("")):a=a+r+"%",a}function o(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),a=Math.round(e._value-60*t*60-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>a?"0"+a:a)}function s(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function d(e,n,a){var r,i,o,s,d,l,u=!1,c=!1,f=!1,h="",v=!1,y=!1,b=!1,x=!1,w=!1,_="",C="",S=Math.abs(e),$=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],k="",O=!1;if(0===e&&null!==g)return g;if(n.indexOf("(")>-1?(u=!0,n=n.slice(1,-1)):n.indexOf("+")>-1&&(c=!0,n=n.replace(/\+/g,"")),n.indexOf("a")>-1&&(v=n.indexOf("aK")>=0,y=n.indexOf("aM")>=0,b=n.indexOf("aB")>=0,x=n.indexOf("aT")>=0,w=v||y||b||x,n.indexOf(" a")>-1?(h=" ",n=n.replace(" a","")):n=n.replace("a",""),S>=Math.pow(10,12)&&!w||x?(h+=m[p].abbreviations.trillion,e/=Math.pow(10,12)):S<Math.pow(10,12)&&S>=Math.pow(10,9)&&!w||b?(h+=m[p].abbreviations.billion,e/=Math.pow(10,9)):S<Math.pow(10,9)&&S>=Math.pow(10,6)&&!w||y?(h+=m[p].abbreviations.million,e/=Math.pow(10,6)):(S<Math.pow(10,6)&&S>=Math.pow(10,3)&&!w||v)&&(h+=m[p].abbreviations.thousand,e/=Math.pow(10,3))),n.indexOf("b")>-1)for(n.indexOf(" b")>-1?(_=" ",n=n.replace(" b","")):n=n.replace("b",""),o=0;o<=$.length;o++)if(r=Math.pow(1024,o),i=Math.pow(1024,o+1),e>=r&&i>e){_+=$[o],r>0&&(e/=r);break}return n.indexOf("o")>-1&&(n.indexOf(" o")>-1?(C=" ",n=n.replace(" o","")):n=n.replace("o",""),C+=m[p].ordinal(e)),n.indexOf("[.]")>-1&&(f=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],d=n.split(".")[1],l=n.indexOf(","),d?(d.indexOf("[")>-1?(d=d.replace("]",""),d=d.split("["),k=t(e,d[0].length+d[1].length,a,d[1].length)):k=t(e,d.length,a),s=k.split(".")[0],k=k.split(".")[1].length?m[p].delimiters.decimal+k.split(".")[1]:"",f&&0===Number(k.slice(1))&&(k="")):s=t(e,null,a),s.indexOf("-")>-1&&(s=s.slice(1),O=!0),l>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[p].delimiters.thousands)),0===n.indexOf(".")&&(s=""),(u&&O?"(":"")+(!u&&O?"-":"")+(!O&&c?"+":"")+s+k+(C?C:"")+(h?h:"")+(_?_:"")+(u&&O?")":"")}function l(e,t){m[e]=t}function u(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function c(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=u(e),a=u(t);return n>a?n:a},-1/0)}var f,h="1.5.3",m={},p="en",g=null,v="0,0",y="undefined"!=typeof module&&module.exports;f=function(t){return f.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=f.fn.unformat(t)),new e(Number(t))},f.version=h,f.isNumeral=function(t){return t instanceof e},f.language=function(e,t){if(!e)return p;if(e&&!t){if(!m[e])throw new Error("Unknown language : "+e);p=e}return(t||!m[e])&&l(e,t),f},f.languageData=function(e){if(!e)return m[p];if(!m[e])throw new Error("Unknown language : "+e);return m[e]},f.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),f.zeroFormat=function(e){g="string"==typeof e?e:null},f.defaultFormat=function(e){v="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,a,r=this.length>>>0,i=!1;for(1<arguments.length&&(a=t,i=!0),n=0;r>n;++n)this.hasOwnProperty(n)&&(i?a=e(a,this[n],n,this):(a=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return a}),f.fn=e.prototype={clone:function(){return f(this)},format:function(e,t){return n(this,e?e:v,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:a(this,e?e:v)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+n*t}var n=c.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t){return e-n*t}var n=c.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t){var n=c(e,t);return e*n*t*n/(n*n)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var n=c(e,t);return e*n/(t*n)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(f(this._value).subtract(e).value())}},y&&(module.exports=f),"undefined"==typeof ender&&(this.numeral=f),"function"==typeof define&&define.amd&&define([],function(){return f})}.call(this),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:" mln",billion:" mld",trillion:" bln"},ordinal:function(e){var t=e%100;return 0!==e&&1>=t||8===t||t>=20?"ste":"de"},currency:{symbol:"€ "}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("be-nl",e)}(),function(){var e={delimiters:{thousands:",",decimal:"."},abbreviations:{
thousand:"千",million:"百万",billion:"十亿",trillion:"兆"},ordinal:function(){return"."},currency:{symbol:"¥"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("chs",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"Kč"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("cs",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mio",billion:"mia",trillion:"b"},ordinal:function(){return"."},currency:{symbol:"DKK"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("da-dk",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"CHF"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("de-ch",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("de",e)}(),function(){var e={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"£"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("en-gb",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===t||3===t?"er":2===t?"do":7===t||0===t?"mo":8===t?"vo":9===t?"no":"to"},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("es",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mm",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===t||3===t?"er":2===t?"do":7===t||0===t?"mo":8===t?"vo":9===t?"no":"to"},currency:{symbol:"$"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("es",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:" tuh",million:" mln",billion:" mld",trillion:" trl"},ordinal:function(){return"."},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("et",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(){return"."},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("fi",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"M",billion:"G",trillion:"T"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"$"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("fr-CA",e)}(),function(){var e={delimiters:{thousands:"'",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"CHF"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("fr-ch",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return 1===e?"er":"e"},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("fr",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"E",million:"M",billion:"Mrd",trillion:"T"},ordinal:function(){return"."},currency:{symbol:" Ft"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("hu",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mila",million:"mil",billion:"b",trillion:"t"},ordinal:function(){return"º"},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("it",e)}(),function(){var e={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"千",million:"百万",billion:"十億",trillion:"兆"},ordinal:function(){return"."},currency:{symbol:"¥"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("ja",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"k",million:"mln",billion:"mrd",trillion:"bln"},ordinal:function(e){var t=e%100;return 0!==e&&1>=t||8===t||t>=20?"ste":"de"},currency:{symbol:"€ "}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("nl-nl",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tys.",million:"mln",billion:"mld",trillion:"bln"},ordinal:function(){return"."},currency:{symbol:"PLN"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("pl",e)}(),function(){var e={delimiters:{thousands:".",decimal:","},abbreviations:{thousand:"mil",million:"milhões",billion:"b",trillion:"t"},ordinal:function(){return"º"},currency:{symbol:"R$"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("pt-br",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"тыс.",million:"млн",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"руб."}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("ru",e)}(),function(){var e={delimiters:{thousands:" ",decimal:","},abbreviations:{thousand:"tis.",million:"mil.",billion:"b",trillion:"t"},ordinal:function(){return"."},currency:{symbol:"€"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("sk",e)}(),function(){var e={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"พัน",million:"ล้าน",billion:"พันล้าน",trillion:"ล้านล้าน"},ordinal:function(){return"."},currency:{symbol:"฿"}};"undefined"!=typeof window&&this.numeral&&this.numeral.language&&this.numeral.language("th",e)}(),function(e){function t(){try{return o in r&&r[o]}catch(e){return!1}}var n,a={},r="undefined"!=typeof window?window:global,i=r.document,o="localStorage",s="script";if(a.disabled=!1,a.version="1.3.20",a.set=function(e,t){},a.get=function(e,t){},a.has=function(e){return void 0!==a.get(e)},a.remove=function(e){},a.clear=function(){},a.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var r=a.get(e,t);n(r),a.set(e,r)},a.getAll=function(){var e={};return a.forEach(function(t,n){e[t]=n}),e},a.forEach=function(){},a.serialize=function(e){return JSON.stringify(e)},a.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},t())n=r[o],a.set=function(e,t){return void 0===t?a.remove(e):(n.setItem(e,a.serialize(t)),t)},a.get=function(e,t){var r=a.deserialize(n.getItem(e));return void 0===r?t:r},a.remove=function(e){n.removeItem(e)},a.clear=function(){n.clear()},a.forEach=function(e){for(var t=0;t<n.length;t++){var r=n.key(t);e(r,a.get(r))}};else if(i&&i.documentElement.addBehavior){var d,l;try{l=new ActiveXObject("htmlfile"),l.open(),l.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),l.close(),d=l.w.frames[0].document,n=d.createElement("div")}catch(e){n=i.createElement("div"),d=i.body}var u=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),d.appendChild(n),n.addBehavior("#default#userData"),n.load(o);var r=e.apply(a,t);return d.removeChild(n),r}},c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),f=function(e){return e.replace(/^d/,"___$&").replace(c,"___")};a.set=u(function(e,t,n){return t=f(t),void 0===n?a.remove(t):(e.setAttribute(t,a.serialize(n)),e.save(o),n)}),a.get=u(function(e,t,n){t=f(t);var r=a.deserialize(e.getAttribute(t));return void 0===r?n:r}),a.remove=u(function(e,t){t=f(t),e.removeAttribute(t),e.save(o)}),a.clear=u(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(o)}),a.forEach=u(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)t(n.name,a.deserialize(e.getAttribute(n.name)))})}try{var h="__storejs__";a.set(h,h),a.get(h)!=h&&(a.disabled=!0),a.remove(h)}catch(e){a.disabled=!0}a.enabled=!a.disabled,e.store=a}(fmx),function(e,t){e.extend(e.fn.textbox.defaults,{validateOnCreate:!1,trimValue:!0}),e.extend(e.fn.textbox.methods,{_setText:e.fn.textbox.methods.setText,setText:function(t,n){return t.each(function(){var t=e(this).textbox("options"),a=e(this).textbox("textbox");n=void 0==n?"":String(n),e(this).textbox("getText")!=n&&a.val(n),t.value=n,a.is(":focus")||(n?a.removeClass("textbox-prompt"):a.val(t.prompt).addClass("textbox-prompt")),n&&e(this).textbox("validate")})},_setValue:e.fn.textbox.methods.setValue,setValue:function(t,n){return t.each(function(){var t=e(this),a=t.data("textbox");n&&e.isFunction(n.trim)&&a&&a.options.trimValue&&(n=n.trim()),t.textbox("_setValue",n)})}})}(jQuery,fmx),function(e){var t=e.fn.validatebox.parseOptions,n=e.fn.validatebox,a=e.fn.validatebox.defaults.events.focus,r=e.fn.validatebox.defaults.events.blur;e.fn.validatebox.parseOptions=function(e){var n=t(e),a=e.getAttribute("validateClassName");return a&&(n.validateClassName=a),n.maxLength||(n.maxLength=e.getAttribute("maxlength")),n},e.extend(e.fn.validatebox.defaults,{validateClassName:"fmx-validate-required",validateOnCreate:!1,validateUseTextboxValue:!0,val:function(t){var n=e(t),a=n.data("validatebox").options;if(a&&a.validateUseTextboxValue){var r=n.next();if(r.hasClass("textbox-value"))return r.val()}return n.val()}}),e.fn.validatebox.defaults.events.focus=function(t){var n=t.data.target,r=e.data(n,"validatebox"),i=r.options,o=i.val(n);if(r.message||null!=o&&void 0!=o&&""!=o)return a(t)},e.fn.validatebox.defaults.events.blur=function(t){var n=t.data.target,a=e.data(n,"validatebox"),i=a.options,o=i.val(n);if(a.message||null!=o&&void 0!=o&&""!=o)return r(t)},e.fn.validatebox.defaults.rules.minLength={validator:function(t,n){var a=e.trim(t).length;return a>=n[0]},message:"Please enter a value a least {0}."},e.fn.validatebox.defaults.rules.maxLength={validator:function(t,n){var a=e.trim(t).length;return a<=n[0]},message:"Please enter a value a less than {0}."},e.fn.validatebox=function(t,a){if("string"==typeof t)return n.call(this,t,a);var r=n.call(this,t,a);return this.each(function(){var t=e.data(this,"validatebox").options,n=e(this);if(t.validateClassName&&!n.hasClass(t.validateClassName)&&t.required&&n.addClass(t.validateClassName),t.maxLength){var a="maxLength["+t.maxLength+"]",r=t.validType;e.isArray(r)?r.push(a):"string"==typeof r?t.validType=[r,a]:t.validType=a}}),r},e.extend(e.fn.validatebox,n)}(jQuery),function(e,t){function n(e){var t=e.data("combo");!t.doValidating&&t.options.limitToList&&t.options.keyHandler.enter&&(t.doValidating=!0,t.options.keyHandler.enter.call(e[0]),t.doValidating=!1);var n=e.data("combogrid");if(n){var a=n.grid.data("datagrid").options;a.queryParams&&a.queryParams.q&&(a.queryParams.q=void 0)}}function a(t){var n=e.data(t,"combo");if(!n)return(e(t).val()||"").split(a.separator);var a=n.options,r=n.combo,i=r.find(".textbox-value").val();i=i?i.split(a.separator):[];var a=n.options,o=e.data(t,"combobox");return o&&o.options.emptyItemEnable&&0==i.length?[o.options.emptyItemValue]:i}function r(t,n){var r=e.data(t,"combo");if(!r){var i=e(t),o=n&&e.isArray(n)?n.join(","):n;return void i.val(o)}var s=r.options,d=r.combo;e.isArray(n)||(n="string"==typeof n?n.split(s.separator):[n]);var l=a(t);d.find(".textbox-value").remove();var u=e(t).attr("textboxName")||"",c=e('<input type="hidden" class="textbox-value">').appendTo(d);c.attr("name",u),s.disabled&&c.attr("disabled","disabled"),c.val(n.join(s.separator));var f=function(){if(l.length!=n.length)return!0;var t=e.extend(!0,[],l),a=e.extend(!0,[],n);t.sort(),a.sort();for(var r=0;r<t.length;r++)if(t[r]!=a[r])return!0;return!1}();f&&(s.multiple?s.onChange.call(t,n,l):s.onChange.call(t,n[0],l[0]),e(t).closest("form").trigger("_change",[t]))}function i(t){if(t.ctrlKey)return s(t);var n=t.data.target,a=e(n),r=a.data("combo"),i=a.combo("options");switch(r.panel.panel("options").comboTarget=n,t.keyCode){case 38:t.preventDefault(),a.combo("showPanel"),i.keyHandler.up.call(n,t);break;case 40:t.preventDefault(),a.combo("showPanel"),i.keyHandler.down.call(n,t);break;case 37:i.keyHandler.left.call(n,t);break;case 39:i.keyHandler.right.call(n,t);break;case 13:i.keyHandler.enter.call(n,t);default:return s(t)}}var o=e.fn.combo;e.fn.combo=function(t,a){return"string"==typeof t?o.apply(this,[t,a]):this.each(function(){var a=e(this);o.call(a,t);var r=e.data(this,"combo"),i=r.panel.data("panel"),s=i.options.onClose;i.options.onClose=function(){s&&s.call(this),n(a)}})},e.extend(e.fn.combo,o),e.fn.combo._parseOptions=e.fn.combo.parseOptions,e.fn.combo.parseOptions=function(t){var n=e.fn.combo._parseOptions(t),a=e(t),r=a.attr("multiple");return(r?"true"==r||1==r||"multiple"==r:void 0)&&(n.multiple=!0),r=a.attr("limitToList"),r&&(n.limitToList="true"==r||1==r),n};var s=e.fn.combo.defaults.inputEvents.keydown;e.fn.combo.defaults.inputEvents.keydown=i,e.fn.combobox.defaults.inputEvents.keydown=i,e.fn.combogrid.defaults.inputEvents.keydown=i,e.extend(e.fn.combo.methods,{_getValue:e.fn.combo.methods.getValue,getValue:function(t){var n=e(t[0]);return n.combo("getValues").join(",")},setValue:function(e,t){return e.combo("setValues",null===t||void 0===t?"":t)},setValues:function(e,t){return e.each(function(){r(this,t)})},getValues:function(e){return a(e[0])}})}(jQuery,fmx),function($,fmx){function initTrees(jq,findings){jq.each(function(){var $tree=$(this),options=$.extend({},$.fn.tree.parseOptions(this),{idField:$tree.attr("idField"),textField:$tree.attr("textField"),parentField:$tree.attr("parentField"),seqField:$tree.attr("seqField"),titleField:$tree.attr("titleField"),checkedField:$tree.attr("checkedField"),stateField:$tree.attr("stateField"),iconClsField:$tree.attr("iconClsField"),query:$tree.attr("query"),orderBy:$tree.attr("orderBy")});$tree.children().size()>0&&(options.query=null),$tree.attr("queryFields")&&(options.queryFields=eval($tree.attr("queryFields"))),$tree.tree(options)}),delete findings.tree}var treeDefaults={loadDataErrorMsg:"Error loading data.",_loader:$.fn.tree.defaults.loader,loader:function(e,t,n){var a=$(this),r=a.tree("options");if(!r.query)return $.fn.tree.defaults._loader.call(this,e,t,n);var i=[];r.queryFields&&(i=i.concat(r.queryFields)),r.commonQueryFields&&(i=i.concat(r.commonQueryFields)),e&&e.queryFields&&($.isArray(e.queryFields)?i=i.concat(e.queryFields):$.isPlainObject(e.queryFields)&&i.push(e.queryFields)),e.id&&(parentQueryField={fieldName:r.parentField||"parentId",fieldStringValue:e.id},i.push(parentQueryField));var o={query:r.query,orderBy:r.orderBy,queryFields:i};r.queryInfo=o,fmx.CommonQueryService.query(o,t,n)},loadFilter:function(e){function t(e){$.extend(!0,e,{id:e.id||e[i],text:e.text||e[o],checked:e.checked||e[d],state:e.state||e[l],iconCls:e.iconCls||e[u],attributes:{data:e.attributes&&e.attributes.data?e.attributes.data:e}}),n.data("collapsedIds")&&n.data("collapsedIds").indexOf(e.id)>=0&&(e.state="closed"),e.children&&$.each(e.children,function(e,n){t(n)})}var n=$(this),a=n.tree("options");if(!a.query)return e;if(e.code<0){var r=e.errors||e.message;return $.messager.alert("Message",$.fn.tree.defaults.loadDataErrorMsg+r,"warning"),null}var i=a.idField||"id",o=a.textField||"text",s=a.parentField||"parentId",d=a.checkedField||"checked",l=a.stateField||"state",u=a.iconClsField||"iconCls",c=$.isArray(e)?null:e.data?e.data.dataList:e;if(c){var f={},h=[];$.each(c,function(e,t){t.attributes&&(t=t.attributes.data);var a={id:t[i],text:t[o],checked:t[d],state:t[l],iconCls:t[u],attributes:{data:t}};n.data("collapsedIds")&&n.data("collapsedIds").indexOf(a.id)>=0&&(a.state="closed"),f[a.id]=a,h.push(a)});var m=[];return $.each(h,function(e,t){if(t.attributes.data[s]){var n=f[t.attributes.data[s]];n?(n.children||(n.children=[]),n.children.push(t)):m.push(t)}else m.push(t)}),m}return $.isArray(e)&&$.each(e,function(e,n){t(n)}),e},onLoadSuccess:function(e,t){function n(e){e.attributes&&(e.attributes.oldJsonValue=JSON.stringify(e.attributes.data)),r.titleField&&$(e.target).attr("title",e.attributes.data[r.titleField]);var t=a.tree("getData",e.target);t&&t.children&&$.each(t.children,function(e,t){n(t)})}var a=$(this),r=a.tree("options");a.data("deletedData",[]),$.each(a.tree("getRoots"),function(e,t){n(t)});var i=a.data("selectedId");if(i){var o=a.tree("find",i);if(o)return void a.tree("select",o.target)}var s=a.data("selectedPosition");void 0!=s&&a.tree("select",a.find(".tree-node:visible")[s])},onLoadError:function(){$.messager.confirm("Message",$.fn.datagrid.defaults.reLoginMsg,function(e){e&&window.location.reload()})}};$.extend($.fn.tree.defaults,treeDefaults),$.extend($.fn.tree.methods,{_reload:$.fn.tree.methods.reload,reload:function(e,t){return e.each(function(){var e=$(this),n=[];$.each(e.find(".tree-collapsed").parent(),function(e,t){n.push($(t).attr("node-id"))}),e.data("collapsedIds",n);var a=e.tree("getSelected");a&&(e.data("selectedId",a.id),e.data("selectedPosition",e.find(".tree-node:visible").index(a.target))),e.tree("_reload",t)})},commonQuery:function(e,t){return e.each(function(){var e=$(this),n=e.tree("options");n.commonQueryFields=null,t&&(t.queryFields&&(n.commonQueryFields=t.queryFields),t.query&&(n.query=t.query),t.orderBy&&(n.orderBy=t.orderBy)),e.tree("reload")})},setQueryFields:function(e,t){return e.each(function(){$(this).tree("options").queryFields=t})},getChanges:function(e){function t(e,a,l){var u=e.attributes.data;delete u.rowState,u[r]=e.id,u[i]=a,u.checked=e.checked,u.iconCls=e.iconCls,u[s]=e.text,o&&(u[o]=l);var c=e.attributes.oldJsonValue;c?c!=JSON.stringify(u)&&(u.rowState="Modified",d.push(u)):("Deleted"==u.rowState?u.rowState="Modified":u.rowState="Added",d.push(u)),$.each(n.tree("getData",e.target).children,function(e,n){t(n,u[r],e)})}var n=$(e[0]),a=n.tree("options"),r=a.idField,i=a.parentField,o=a.seqField,s=a.textField,d=[];return $.each(n.tree("getRoots"),function(e,n){t(n,"0",e)}),$.each(n.data("deletedData"),function(e,t){d.indexOf(t)!=-1||n.tree("find",t[r])||(t.rowState="Deleted",d.push(t))}),d},getHalfChecked:function(e){var t=e[0],n=[];return $(t).find(".tree-checkbox2").each(function(){var e=$(this).parent();n.push($(t).tree("getNode",e[0]))}),n},appendAfterSelected:function(e,t){return e.each(function(){var e=$(this);$.extend(!0,t,{id:t.id||$.now(),text:t.text||"",attributes:{data:t}});var n=e.tree("getSelected");null==n?e.tree("append",{data:[t]}):e.tree("insert",{after:n.target,data:t}),t=e.tree("find",t.id),e.tree("select",t.target)})},insertBeforeSelected:function(e,t){return e.each(function(){var e=$(this);$.extend(!0,t,{id:t.id||$.now(),text:t.text||"",attributes:{data:t}});var n=e.tree("getSelected");null!=n&&(e.tree("insert",{before:n.target,data:t}),t=e.tree("find",t.id),e.tree("select",t.target))})},addChildToSelected:function(e,t){return e.each(function(){var e=$(this);$.extend(!0,t,{id:t.id||$.now(),text:t.text||"",attributes:{data:t}});var n=e.tree("getSelected");null!=n&&(e.tree("append",{parent:n.target,data:[t]}),t=e.tree("find",t.id),e.tree("select",t.target))})},_remove:$.fn.tree.methods.remove,remove:function(e,t){return e.each(function(){function e(t){var a=t.attributes.data;r.push(a);var i=n.tree("getData",t.target).children;$.isArray(i)&&$.each(i,function(t,n){e(n)})}var n=$(this),a=n.tree("options");if(a.query){var r=n.data("deletedData");e(n.tree("getData",t))}}),this._remove(e,t)},removeSelected:function(e){return e.each(function(){var e=$(this),t=e.tree("getSelected");if(null!=t){var n=$(t.target).parent().next();if(n.size()>0)e.tree("select",n.children().get(0));else{var a=$(t.target).parent().prev();if(a.size()>0)e.tree("select",a.children().get(0));else{var r=e.tree("getParent",t.target);null!=r&&e.tree("select",r.target)}}e.tree("remove",t.target)}})},moveSelectedUp:function(e){return e.each(function(){var e=$(this),t=e.tree("getSelected");if(null!=t){var n=$(t.target).parent().prev();n.size()>0&&(e.tree("insert",{before:n.children().get(0),data:e.tree("pop",t.target)}),e.tree("select",e.tree("find",t.id).target))}})},moveSelectedDown:function(e){return e.each(function(){var e=$(this),t=e.tree("getSelected");if(null!=t){var n=$(t.target).parent().next();n.size()>0&&(e.tree("insert",{after:n.children().get(0),data:e.tree("pop",t.target)}),e.tree("select",e.tree("find",t.id).target))}})},moveSelectedLeft:function(e){return e.each(function(){var e=$(this),t=e.tree("getSelected");if(null!=t){var n=e.tree("getParent",t.target);null!=n&&(e.tree("insert",{after:n.target,data:e.tree("pop",t.target)}),e.tree("select",e.tree("find",t.id).target))}})},moveSelectedRight:function(e){return e.each(function(){var e=$(this),t=e.tree("getSelected");if(null!=t){var n=$(t.target).parent().prev();n.size()>0&&(e.tree("append",{parent:n.children().get(0),data:[e.tree("pop",t.target)]}),e.tree("select",e.tree("find",t.id).target))}})},reloadAndSelect:function(e,t){return e.each(function(){var e=$(this);e.data("selectedId",t),e.tree("reload")})}}),$($.parser).on("onBefore",function(e,t,n){initTrees(n.tree,n)})}(jQuery,fmx),function($,fmx){function getStoreKey(e){return document.location.pathname+"."+e.id}function restoreColumns(e){if(e.id&&e.storeColumns){var t=fmx.utils.parseJSON(fmx.store.get(getStoreKey(e)));if(t&&!$.isEmptyObject(t)){if(!$.isEmptyObject(t.columns)&&$.isArray(e.columns)&&e.columns.length>0){var n=e.columns.length-1;$.each(e.columns[n],function(){var e=t.columns[this.field];e&&(this.hidden=e.hidden)})}if(!$.isEmptyObject(t.frozenColumns)&&$.isArray(e.frozenColumns)&&e.frozenColumns.length>0){var n=e.frozenColumns.length-1;$.each(e.frozenColumns[n],function(){var e=t.frozenColumns[this.field];e&&(this.hidden=e.hidden)})}}}}function storeColumnsInfo(e){var t=$.data(e,"datagrid").options;if(t.id&&t.storeColumns&&t._initialized){var n={},a={};if($.isArray(t.columns)&&t.columns.length>0){var r=t.columns.length-1;$.each(t.columns[r],function(e,t){if("ck"!=t.field){var a={width:t.width,index:e};t.hidden&&(a.hidden=t.hidden),n[t.field]=a}})}if($.isArray(t.frozenColumns)&&$.isArray(t.frozenColumns[0])){var r=t.frozenColumns.length-1;$.each(t.frozenColumns[r],function(e,t){if("ck"!=t.field){var n={width:t.width,index:e};t.hidden&&(n.hidden=t.hidden),a[t.field]=n}})}var i=getStoreKey(t);fmx.store.set(i,{columns:n,frozenColumns:a})}}function wrapGrid(target,rownumbers,opts){function getColumns(){var frozenColumns=[],columns=[],str;return $(target).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var cols=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["id","field","align","valign","halign","orderBy","order","width","format","formatter","exportFormatter","exportFormat",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number"}]),{title:th.html()||void 0,hidden:!!th.attr("hidden")||void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0});if(col.i18n&&(col.title=$.fn.i18n.methods.getMessage(col.i18n)),(str=th.attr("formatter"))&&(str in opts.formatters?col.formatter=opts.formatters[str]:col.formatter=eval(str)),col.width&&String(col.width).indexOf("%")==-1&&(col.width=parseInt(col.width)),(str=th.attr("codetype"))&&(col.codeType=str),str=th.attr("editor")){var s=$.trim(str);"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s,th.attr("required")&&("string"==typeof col.editor&&(col.editor={type:col.editor}),"text"==col.editor.type&&(col.editor.type="validatebox"),col.editor.options||(col.editor.options={}),col.editor.options.required=!0),col.codeType&&("string"==typeof col.editor&&(col.editor={type:col.editor}),col.editor.options||(col.editor.options={}),col.editor.options.codeType||(col.editor.options.codeType=col.codeType))}cols.push(col)}),opt.frozen?frozenColumns.push(cols):columns.push(cols)})}),[frozenColumns,columns]}var panel=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(target);panel.panel({doSize:!1,cls:"datagrid"}),$(target).addClass("datagrid-f").hide().appendTo(panel.children("div.datagrid-view"));var cc=getColumns(),view=panel.children("div.datagrid-view"),view1=view.children("div.datagrid-view1"),view2=view.children("div.datagrid-view2");return{panel:panel,frozenColumns:cc[0],columns:cc[1],dc:{view:view,view1:view1,view2:view2,header1:view1.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:view2.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:view1.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:view2.children("div.datagrid-body"),footer1:view1.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:view2.children("div.datagrid-footer").children("div.datagrid-footer-inner")}}}function afterInitial(e){var t=$.data(e,"datagrid");if(t.options.singleSelect&&t.options.checkbox!==!1){var n=t.options.frozenCheckbox?t.dc.header1:t.dc.header2;n&&n.find(".datagrid-header-check").css({visibility:"hidden"})}t.options._initialized=!0}function canEdit(e){if(!$.data(e,"editable"))return!1;var t=$.data(e,"datagrid");return!t||!t.options.readonly}!function(){for(var e in $.fn.datagrid.defaults.editors){var t=$.fn.datagrid.defaults.editors[e];$.extend(t,{_getValue:t.getValue,getValue:function(e){var t=this._getValue(e);return""===$.trim(t)?null:t}})}}(),$.fn._datagrid=$.fn.datagrid,$.fn.datagrid=function(e,t){return"string"==typeof e?$.fn.datagrid.methods[e](this,t):(e=e||{},this.each(function(){var t,n=$.data(this,"datagrid");if(n)t=$.extend(n.options,e),n.options=t;else{t=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),e),$(this).css("width","").css("height","");var a=wrapGrid(this,t.rownumbers,t);t.columns||(t.columns=a.columns),t.frozenColumns||(t.frozenColumns=a.frozenColumns),t.columns=$.extend(!0,[],t.columns),t.frozenColumns=$.extend(!0,[],t.frozenColumns),restoreColumns(t);for(var r=[],i={},o=0;o<t.frozenColumns.length;o++)Array.prototype.push.apply(r,t.frozenColumns[o]);for(var o=0;o<t.columns.length;o++)Array.prototype.push.apply(r,t.columns[o]);var s=!1;if($.each(r,function(e,n){n.codeType&&(n.formatter&&(n._formatter=n.formatter),n.formatter=$.fn.datagrid.defaults.formatter,i[n.field]=n.codeType),void 0!=n.sortable&&null!=n.sortable||(n.sortable=!0),"string"==typeof n.formatter?n.formatter=t.formatters[n.formatter]:!n.formatter&&n.format&&(n.formatter=t.formatters.replace),n.editor&&(s=!0)}),t.checkbox!==!1&&(t.frozenCheckbox?(0==t.frozenColumns.length&&(t.frozenColumns=[[]]),t.frozenColumns[0].unshift({field:"ck",checkbox:!0})):(0==t.columns.length&&(t.columns=[[]]),t.columns[0].unshift({field:"ck",checkbox:!0}))),$.data(this,"editable",s),t.code){var d=fmx.checkFunctionAuthorization(t.code);$.data(this,"editable",d)}t.fieldCodeTypes=i,$.data(this,"datagrid",{options:t,panel:a.panel,dc:a.dc,ss:null,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})}t._autoLoad=!1,t.maskit&&"string"==typeof t.maskit&&(t.maskit=fmx.utils.getJquery(t.maskit)),$.fn._datagrid.call($(this),{}),afterInitial(this)}))},$.extend($.fn.datagrid,$.fn._datagrid);var _beginEdit=$.fn.datagrid.methods.beginEdit,_endEdit=$.fn.datagrid.methods.endEdit,_fitColumns=$.fn.datagrid.methods.fitColumns;$.extend($.fn.datagrid.methods,{fitColumns:function(e){return _fitColumns(e),e.each(function(){storeColumnsInfo(this)})},beginEdit:function(e,t){return e.each(function(){canEdit(this)&&(_beginEdit($(this),t),$.data(this,"currentRow",t))})},endEdit:function(e,t){return e.each(function(){_endEdit($(this),t);var e=$.data(this,"currentRow");e==t&&$.removeData(this,"currentRow")})},commonQuery:function(e,t){return e.each(function(){var e=$(this),n=e.datagrid("options");n.commonQueryFields=null,t&&(t.paramForm&&(n.paramForm=t.paramForm),t.queryFields&&(n.commonQueryFields=t.queryFields),t.query&&(n.query=t.query),t.orderBy&&(n.orderBy=t.orderBy),t.txManager&&(n.txManager=t.txManager)),e.hasClass("easyui-treegrid")?e.treegrid("reload"):e.datagrid("load")})},setQueryFields:function(e,t){return e.each(function(){$(this).datagrid("options").queryFields=t})},getSelectedIndex:function(e){var t=$(e[0]);return t.datagrid("getRowIndex",t.datagrid("getSelected"))},getSelectionsIndex:function(e){for(var t=$(e[0]),n=t.datagrid("getSelections"),a=[],r=0;r<n.length;r++)a.push(t.datagrid("getRowIndex",n[r]));return a},setCurrentRow:function(e,t){return e.each(function(){void 0==t?$.removeData(e[0],"currentRow"):$.data(e[0],"currentRow",t)})},getCurrentRow:function(e){return $.data(e[0],"currentRow")},validate:function(e){var t=$(e[0]),n=t.datagrid("getCurrentRow");return void 0==n||t.datagrid("validateRow",n)},forceEndEdit:function(e,t){return e.each(function(){var e=$(this);void 0==t&&(t=e.datagrid("getCurrentRow")),t>=0&&e.datagrid("endEdit",t),e.datagrid("setCurrentRow",void 0)})},_getChanges:$.fn.datagrid.methods.getChanges,getChanges:function(e,t){$(e[0]);this.forceEndEdit(e);var n=this._getChanges(e,"inserted"),a=this._getChanges(e,"updated"),r=this._getChanges(e,"deleted");$.each(n,function(e,t){t.modelState="Added"}),$.each(a,function(e,t){t.modelState="Modified"}),$.each(r,function(e,t){t.modelState="Deleted"});var i;if(t)switch(t){case"inserted":i=n;case"updated":i=a;case"deleted":i=r}else{i=[],Array.prototype.push.apply(i,n),Array.prototype.push.apply(i,a);for(var o,s=0;s<r.length;s++)o=r[s],i.indexOf(o)==-1&&i.push(o)}return i},_reload:$.fn.datagrid.methods.reload,reload:function(e,t){return 1==t?$.fn.datagrid.methods.query(e):(e.each(function(){var e=$.data(this,"datagrid");e.options.pageNumber||(e.options.pageNumber=1)}),$.fn.datagrid.methods._reload(e,t)),e},query:function(e,t){return e.each(function(){var e,n=$(this);e=n.hasClass("easyui-treegrid")?n.treegrid("options"):n.datagrid("options"),(e.sortOrder||e.sortName)&&(n.datagrid("getPanel").children(".datagrid-view").children(".datagrid-view1,.datagrid-view2").children(".datagrid-header").find(".datagrid-cell").removeClass("datagrid-sort-asc datagrid-sort-desc").find(".datagrid-sort-count").remove(),e.sortName=void 0,e.sortOrder=void 0,e.sortCount=void 0),n.hasClass("easyui-treegrid")?n.treegrid("reload",t):n.datagrid("load",t)})},exportExcel:function(e,t){function n(e,t){if(!t.formatter)return null;var n;return $.each(e.formatters,function(e,a){if(a==t.formatter)return n=e,!1}),n?n:t.formatter instanceof String?t.formatter:void 0}return e.each(function(){var e=$(this),a=e.datagrid("options");if(!a.query)return void $.messager.alert("Message",$.fn.datagrid.defaults.exportExcelErrorMsg,"warning");if(a.queryInfo){var r={params:$.extend({},a.exportParams),type:a.exportType||$.fn.datagrid.defaults.exportType,fileName:a.exportFilename,template:a.exportTemplate},i=$.extend(!0,{},a.queryInfo),o=[];
t||(i.pagingInfo=null);var s=e.datagrid("getPanel").children(".datagrid-view").children(".datagrid-view1,.datagrid-view2").children(".datagrid-header").find("tr");$.each(e.datagrid("getColumnFields",!0).concat(e.datagrid("getColumnFields",!1)),function(t,r){var i=e.datagrid("getColumnOption",r);i.title&&($field=s.find("td[field='"+i.field+"']"),o.push({field:i.field,title:i.title,codeType:i.codeType,format:i.exportFormat||i.format,formatter:i.exportFormatter||n(a,i),width:$field.width()+10}))}),fmx.CommonExporter.doExportQuery(r,i,o)}})},refreshFooter:function(e){return e.each(function(){var e=$(this);if(e.attr("showFooter")){e.datagrid("forceEndEdit");var t=[];e.find("tfoot tr").each(function(n,a){var r=$(a),i={};r.find("td").each(function(t,n){var a=$(n),r=a.attr("field"),o=0,s=a.attr("footerType");switch(s){case"count":o=e.datagrid("getRows").length;break;case"sum":$.each(e.datagrid("getRows"),function(e,t){o+=isNaN(+t[r])?0:+t[r]});break;case"average":var d=e.datagrid("getRows").length;0==d?o=0:($.each(e.datagrid("getRows"),function(e,t){o+=isNaN(+t[r])?0:+t[r]}),o/=d);break;default:o=a.html()}i[r]=o}),t.push(i)}),t.length&&e.datagrid("reloadFooter",t)}})},_loading:$.fn.datagrid.methods.loading,_loaded:$.fn.datagrid.methods.loaded,loading:function(e){return e.each(function(){var e=$.data(this,"datagrid").options;e.maskit&&e.maskit.maskit(!0,!0)}),$.fn.datagrid.methods._loading(e)},loaded:function(e){return e.each(function(){var e=$.data(this,"datagrid").options;e.maskit&&e.maskit.maskit("unmask",!0)}),$.fn.datagrid.methods._loaded(e)}}),$.fn.datagrid.parseOptions=function(target){var t=$(target),exportParams=t.attr("exportParams"),columns=t.attr("columns"),frozenColumns=t.attr("frozenColumns");exportParams=exportParams&&"{"==exportParams.charAt(0)?eval(exportParams):void 0,columns=columns&&"{"==columns.charAt(0)?eval(columns):void 0,frozenColumns=frozenColumns&&"{"==frozenColumns.charAt(0)?eval(frozenColumns):void 0;var onQueryField=t.attr("onQueryField")?eval(t.attr("onQueryField")):void 0;return $.extend({exportParams:exportParams,columns:columns,frozenColumns:frozenColumns,onQueryField:onQueryField},$.fn.panel.parseOptions(target),$.parser.parseOptions(target,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle","query","exportTemplate","exportFilename","exportType","paramForm","orderBy","groupField","parentField","iconClsField","code","txManager",{sharedStyleSheet:"boolean",fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",ctrlSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{storeColumns:"boolean",storeColumnsWithWidth:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number",maxRowLimit:"number",autoLoad:"boolean",readonly:"boolean",showContextMenu:"boolean",showExportContextMenu:"boolean",frozenCheckbox:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:void 0!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,maskit:t.attr("maskit"),rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0,queryFields:t.attr("queryFields")?eval(t.attr("queryFields")):void 0})};var formatters={number:function(e,t,n){return e=fmx.formatters.formatNumber(e,this.format),"<span style='float:right;'>"+e+"</span>"},currency:function(e,t,n){return e=fmx.formatters.formatCurrency(e,this.format),"<span style='float:right;'>"+e+"</span>"},date:function(e,t,n){return fmx.formatters.formatDate(e,this.format)},datetime:function(e,t,n){return fmx.formatters.formatDatetime(e,this.format)},time:function(e,t,n){return e=fmx.formatters.formatTime(e,this.format),"<span style='float:right;'>"+e+"</span>"},replace:function(e,t,n){return this.format&&(e=this.format.replace(/{value}/g,e),e=e.replace(/{index}/g,n)),e},dynamic:function(e,t,n){return this.format&&(this._formatter||(this._formatter=new Function("value","rowData","index","return "+this.format)),e=this._formatter.call(this,e,t,n)),e},htmlencode:function(e,t,n){return e?fmx.utils.htmlencode(e):e},htmldecode:function(e,t,n){return e?fmx.utils.htmldecode(e):e}},onViewAfterRender=$.fn.datagrid.defaults.view.onAfterRender;$.fn.datagrid.defaults=$.extend($.fn.datagrid.defaults,{url:!0,singleSelect:!0,striped:!0,fit:!0,fitColumns:!0,storeColumns:!0,storeColumnsWithWidth:!0,rownumbers:!0,pagination:!0,selectOnCheck:!0,pagePosition:"bottom",pageNumber:0,readonly:!1,showContextMenu:!0,showExportContextMenu:!0,frozenCheckbox:!0,autoLoad:!!fmx.pageContext.easyui.dataGridAutoLoad,pageSize:fmx.pageContext.easyui.dataGridPageSize||10,pageList:fmx.pageContext.easyui.dataGridPageList||[10,20,30,40,50],refreshText:"Refresh",resetSortText:"Default Sort Order",exportExcelCurrentPageText:"Export Excel (Current Page)",exportExcelAllText:"Export Excel (All)",showColumnsText:"Show Columns",exportExcelErrorMsg:"Can not export Excel for this table.",dataChangedMsg:"Data changed. Discard changes?",loadDataErrorMsg:"Error loading data.",reLoginMsg:"Error loading data. Please re-login and try again.",exportParams:{},exportType:fmx.pageContext.easyui.dataGridExportType||"jxls",exportFilename:"datagrid-data",exportTemplate:"",formatters:formatters,onQueryField:$.noop,txManager:null,loader:function(e,t,n){var a=$(this),r=a.datagrid("options");if(!r._autoLoad&&(r._autoLoad=!0,r.url===!0&&(r.url=""),!r.autoLoad))return!1;if(r.url)$.ajax({type:r.method,url:r.url,data:e,dataType:"json",success:function(e){t(e)},error:function(){n.apply(this,arguments)}});else{if(!r.query)return!1;var i=[];if(r.queryFields&&(i=i.concat(r.queryFields)),r.commonQueryFields&&(i=i.concat(r.commonQueryFields)),e&&e.queryFields&&($.isArray(e.queryFields)?i=i.concat(e.queryFields):$.isPlainObject(e.queryFields)&&i.push(e.queryFields)),e&&e.q&&i.push({fieldName:a.datagrid("getColumnFields").join(","),fieldValue:e.q,operator:"ilikeAnywhere"}),r.paramForm){for(var o=a.parent(),s=null;;){if(s=o.find("#"+r.paramForm),s.size()>0)break;if(o=o.parent(),0==o.size())break}if(s){if(s.form("validate")===!1)return!1;var d=s.form("getQueryFields");d&&(i=i.concat(d))}}if($.isFunction(r.onQueryField)){var l=r.onQueryField.call(this);$.isArray(l)?i=i.concat(l):$.isPlainObject(l)&&i.push(l)}var u={query:r.query,fieldCodeTypes:r.fieldCodeTypes,queryFields:i,orderBy:e.sort?e.sort+" "+e.order:r.orderBy||""};r.txManager&&(u.txManager=r.txManager),r.maxRowLimit&&(u.maxRowLimit=r.maxRowLimit),r.pagination&&(u.pagingInfo={pageSize:e.rows,currentPage:e.page,pageNo:e.page,totalRows:a.datagrid("getPager").pagination("options").total}),r.queryInfo=u,fmx.CommonQueryService.query(u,function(e){!e||e.code<0?n(e.message):e.data&&t(e)},n)}},loadFilter:function(e){if(!e)return{total:0,rows:[]};if($.isArray(e.rows))return e;if(e.code<0){var t;return t=e.errors?JSON.stringify(e.errors):e.message||e.exception,$.messager.alert("Message",$.fn.datagrid.defaults.loadDataErrorMsg+t,"warning"),{total:0,rows:[]}}var n,a;if($.isArray(e.data))n=e.data,e.pagingInfo&&(a=e.pagingInfo.totalRows),e.total>0&&(a=e.total);else if(e.data&&$.isArray(e.data.dataList))n=e.data.dataList,e.data.selectCodeValues&&fmx.mergeSelectCodeValues(e.data.selectCodeValues),e.data.pagingInfo&&(a=e.data.pagingInfo.totalRows),e.data.total>0&&(a=e.data.total);else{if(!$.isArray(e))return{total:0,rows:[]};n=e}e={rows:n,total:a||n.length};var r=$(this);if(r.hasClass("easyui-treegrid")&&$.isArray(e.rows)){var i=r.treegrid("options"),o=i.parentField||"parentId",s=i.iconClsField||"iconCls";$.each(e.rows,function(e,t){t[o]&&"0"!=t[o]&&(t._parentId=t[o]),t[s]&&(t.iconCls=t[s])})}return e},formatter:function(e,t,n){var a=this._formatter,r=this;if(this.codeType&&$isValidValue(e)){var i=this.field,o=this.codeType,s=fmx.getSelectCodeValue(o,e,!0);if(!$isValidValue(s)){var d={};d[o]=e;var l=i+(new Date).valueOf();return fmx.CommonQueryService.getSelectCodeValuesByKeys(d,function(i){i.message?$.messager.alert("提示",i.message):i.data&&(fmx.mergeSelectCodeValue(i.data),e=fmx.getSelectCodeValue(o,e,!0),a&&(e=a.call(r,e,t,n))),$("#"+l).replaceWith(e)}),"<div id='"+l+"'>...</div>"}e=s}return a?a.call(this,e,t,n):e},onLoadSuccess:function(e,t){var n=$(this);if(t||(t=e),$(this).datagrid("setCurrentRow",void 0),$(this).data("lastSelectedIndex",null),t&&($(this).datagrid("refreshFooter"),n.hasClass("easyui-treegrid"))){var a=n.data("selectedId");a&&n.treegrid("select",a)}},onLoadError:function(e){"string"!=typeof e&&(e="string"==typeof e.message?e.message:"string"==typeof e.errors?e.errors:$.isFunction(e.state)?e.state():null),$.messager.confirm(e?$.fn.datagrid.defaults.reLoginMsg:"Message",e?e:$.fn.datagrid.defaults.reLoginMsg,function(e){e&&window.location.reload()})},onBeforeSortColumn:function(){var e=$.data(this,"datagrid");if(!e.data||!e.data.rows||0==e.data.rows.length)return!1},onClickRow:function(e,t){var n=$(this),a=n.datagrid("options");if(a.singleSelect&&n.hasClass("easyui-treegrid")){t=e;var r=a.idField,i=t[r],o=n.treegrid("getSelectionsId");$.each(o,function(e,t){t!=i&&n.treegrid("unselect",t)}),o.indexOf(i)==-1&&n.treegrid("select",i)}},onClickCell:function(e,t,n){var a=$(this);a.data("focusField",t)},onUnselect:function(e,t){var n=$(this),a=n.datagrid("options");canEdit(this)&&(a.unselectTimer=setTimeout(function(){n.datagrid("getCurrentRow")==e&&(n.datagrid("validateRow",e)?n.datagrid("endEdit",e):n.datagrid("selectRow",e))},0))},onSelect:function(e,t){var n=$(this),a=n.datagrid("options");if(a.unselectTimer&&(clearTimeout(a.unselectTimer),a.unselectTimer=!1),canEdit(this)){var r=n.datagrid("getCurrentRow");if(r!=e){if(!n.datagrid("validateRow",r))return n.datagrid("unselectRow",e),void setTimeout(function(){n.datagrid("selectRow",r)},0);n.datagrid("endEdit",r),setTimeout(function(){n.datagrid("beginEdit",e)},0)}}if(n.hasClass("easyui-treegrid")){var i=e;n.data("selectedId",i)}else if(n.datagrid("options").singleSelect){var o=n.data("lastSelectedIndex");o==e?(setTimeout(function(){n.datagrid("unselectRow",o)},10),n.data("lastSelectedIndex",null)):n.data("lastSelectedIndex",e)}else{if(n.data("shiftKey")){n.removeData("shiftKey");var s=n.data("lastSelectedIndex");if(void 0!=s)if(s<e)for(var d=s;d<e;d++)n.datagrid("selectRow",d);else for(var d=e;d<s;d++)n.datagrid("selectRow",d)}n.data("lastSelectedIndex",e)}},onAfterEdit:function(e,t,n){$.isEmptyObject(n)||$(this).datagrid("refreshFooter")},onHeaderContextMenu:function(e,t){$.fn.datagrid.defaults.onRowContextMenu.apply(this,[e,null,null])},onContextMenu:function(e,t){$.fn.datagrid.defaults.onRowContextMenu.apply(this,[e,null,t])},onRowContextMenu:function(e,t,n){if(!fmx.textSelected()){var a=$(this),r=a.datagrid("options");if(r.showContextMenu){if(e.preventDefault(),r.contextMenu)return void r.contextMenu.menu("show",{left:e.pageX,top:e.pageY});var i=[];i.push("<div class='easyui-menu' style='width:200px;'>"),i.push("<div id='Refresh'>"+$.fn.datagrid.defaults.refreshText),i.push("</div><div id='ResetSort'>"),i.push($.fn.datagrid.defaults.resetSortText+"</div>"),r.showExportContextMenu&&(i.push("<div class='menu-sep'></div>"),i.push("<div id='ExportExcelCurrentPage'>"),i.push($.fn.datagrid.defaults.exportExcelCurrentPageText+"</div>"),i.push("<div id='ExportExcelAll'>"),i.push($.fn.datagrid.defaults.exportExcelAllText+"</div>")),i.push("<div class='menu-sep'></div><div><span>"),i.push($.fn.datagrid.defaults.showColumnsText),i.push("</span><div style='width:180px;'>"),$.each(a.datagrid("getColumnFields"),function(e,t){var n=a.datagrid("getColumnOption",t);n.hidden?i.push("<div data-field='"+t+"' data-title='"+n.title+"' hidding='true'>&nbsp;&nbsp;&nbsp;"+n.title+"</div>"):i.push("<div data-field='"+t+"' data-title='"+n.title+"'>√ "+n.title+"</div>")}),i.push("</div></div></div>");var o=$(i.join("")).appendTo(a.closest(".datagrid"));r.contextMenu=o,o.menu({left:e.pageX,top:e.pageY,events:{mouseenter:$.fn.menu.defaults.events.mouseenter,mouseleave:$.fn.menu.defaults.events.mouseleave,mouseover:$.fn.menu.defaults.events.mouseover,mouseout:$.fn.menu.defaults.events.mouseout,click:function(e){var t=e.data.target,n=$(e.target).closest(".menu-item"),a=$(t).menu("getItem",n[0]);if(!a.id&&n.attr("data-field")){var r=$(t).data("menu").options;return n.trigger("mouseenter"),void r.onClick.call(t,a)}$.fn.menu.defaults.events.click.call(this,e)}},onClick:function(e){switch(e.id){case"Refresh":a.hasClass("easyui-treegrid")?a.treegrid("reload"):a.datagrid("reload");break;case"ResetSort":a.datagrid("query");break;case"ExportExcelCurrentPage":a.datagrid("exportExcel",!0);break;case"ExportExcelAll":a.datagrid("exportExcel");break;default:var t=$(e.target),n=t.attr("data-field");if(n){var r=t.children(".menu-text");return t.attr("hidding")?(a.datagrid("showColumn",n),t.removeAttr("hidding"),r.text("√ "+t.attr("data-title"))):(a.datagrid("hideColumn",n),t.attr("hidding",!0),r.html("&nbsp;&nbsp;&nbsp;"+t.attr("data-title"))),!1}}}}).menu("show")}}},view:$.extend($.fn.datagrid.defaults.view,{render:function(e,t,n){var a=$(e).datagrid("getRows");t[0].innerHTML=this.renderTable(e,0,a,n)},renderFooter:function(e,t,n){for(var a=($.data(e,"datagrid").options,$.data(e,"datagrid").footer||[]),r=$(e).datagrid("getColumnFields",n),i=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],o=0;o<a.length;o++)i.push('<tr class="datagrid-row" datagrid-row-index="'+o+'">'),i.push(this.renderRow.call(this,e,r,n,o,a[o])),i.push("</tr>");i.push("</tbody></table>"),t[0].innerHTML=i.join("")},updateRow:function(e,t,n){function a(t){var n=i.rowStyler?i.rowStyler.call(e,t,o):"";return this.getStyleValue(n)}function r(n){var a=$(e).datagrid("getColumnFields",n),r=i.finder.getTr(e,t,"body",n?1:2);r.html(this.renderRow.call(this,e,a,n,t,o)),r.attr("style",d).attr("class",l)}var i=$.data(e,"datagrid").options,o=i.finder.getRow(e,t);$.extend(o,n);var s=a.call(this,t),d=s.s,l="datagrid-row "+(t%2&&i.striped?"datagrid-row-alt ":" ")+s.c;r.call(this,!0),r.call(this,!1),$(e).datagrid("fixRowHeight",t)},renderRow:function(e,t,n,a,r){var i=$.data(e,"datagrid").options,o=[];if(n&&i.rownumbers){var s=a+1;i.pagination&&(s+=(i.pageNumber-1)*i.pageSize),o.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+s+"</div></td>")}for(var d=0;d<t.length;d++){var l=t[d],u=$(e).datagrid("getColumnOption",l);if(u){var c=r[l];c=null==c||void 0==c?"":c;var f=u.styler?u.styler(c,r,a)||"":"",h=this.getStyleValue(f),m=h.c?'class="'+h.c+'"':"",p=u.hidden?'style="display:none;'+h.s+'"':h.s?'style="'+h.s+'"':"",g=u.valign?' valign="'+u.valign+'"':"";o.push('<td field="'+l+'" '+m+" "+p+g+">");var p="";u.checkbox||(u.align&&(p+="text-align:"+u.align+";"),i.nowrap?i.autoRowHeight&&(p+="height:auto;"):p+="white-space:normal;height:auto;"),o.push('<div style="'+p+'" '),o.push(u.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+u.cellClass+'"'),o.push(">"),u.checkbox?(o.push('<input type="checkbox" '+(r.checked?'checked="checked"':"")),o.push(' name="'+l+'" value="'+(void 0!=c?c:"")+'">')):u.formatter?o.push(u.formatter(c,r,a)):o.push(c),o.push("</div>"),o.push("</td>")}}return o.join("")},onAfterRender:function(e){onViewAfterRender.call(this,e);var t=$.data(e,"datagrid"),n=t.options;if(n.rownumbers)if(t.rowNumberWidth){var a=t.data&&$.isArray(t.data.rows)?t.data.rows.length:0;n.pagination&&(a+=(n.pageNumber-1)*n.pageSize);var r=t.rowNumberWidth,i=a.toString().length-2;i>0&&(r+=8*i);var o=n.showHeader?t.dc.header1.find(".datagrid-header-rownumber").eq(0).width():t.dc.body1.find(".datagrid-cell-rownumber:first").eq(0).width();o===t.rowNumberWidth&&o===r||(t.dc.body1.find(".datagrid-cell-rownumber").width(r),n.showHeader&&t.dc.header1.find(".datagrid-header-rownumber").width(r),$(e).datagrid("fixColumnSize"),n.showFooter&&t.dc.footer1.find(".datagrid-cell-rownumber").width(r))}else{var r=n.showHeader?t.dc.header1.find(".datagrid-header-rownumber").eq(0).width():t.dc.body1.find(".datagrid-cell-rownumber:first").eq(0).width();t.rowNumberWidth=r}}})}),$.extend($.fn.datalist.defaults,{url:!0,autoLoad:$.fn.datagrid.defaults.autoLoad,loader:$.fn.datagrid.defaults.loader,loadFilter:$.fn.datagrid.defaults.loadFilter}),$.extend($.fn.treegrid.defaults,{url:!0,autoLoad:$.fn.datagrid.defaults.autoLoad,loader:$.fn.datagrid.defaults.loader,loadFilter:$.fn.datagrid.defaults.loadFilter,formatters:$.fn.datagrid.defaults.formatters,formatter:$.fn.datagrid.defaults.formatter})}(jQuery,fmx),function($,fmx){function addEmptyItem(e,t){if(!e.emptyItemEnable||e.multiple)return t;var n={};return n[e.valueField]=e.emptyItemValue,n[e.textField]=e.emptyItemText,$.isArray(t)?t.unshift(n):t=[n],t}function mergeCodeData(e,t){e.codeType&&(fmx.mergeSelectCodeValue(e.codeType,e.valueField,e.textField,t),SELECT_CODE_DATAS[e.codeType]=$.extend([],t))}function getQueryInfo(e,t){var n=[];e.queryFields&&Array.prototype.push.apply(n,e.queryFields),t&&t.q&&e.textField&&n.push({fieldName:e.textField,fieldValue:t.q,operator:"ilikeAnywhere"});var a={query:e.query||e.codeType,queryFields:n,orderBy:e.orderBy};return a}function initCombobox(e,t){var n=[],a={};e.each(function(){var e=$(this),r=$.extend({},$.fn.combobox.parseOptions(this),t),i=r.codeType;if(!i)return _combobox.call($(this),r);if(e.attr("comboname",e.attr("name")),SELECT_CODE_OPTS[i]){if(r=extendComboboxCodeOpts(r,SELECT_CODE_OPTS[i]),(!$.isArray(r.queryFields)||0==r.queryFields.length)&&SELECT_CODE_DATAS[i])return r.data=$.extend([],SELECT_CODE_DATAS[i]),_combobox.call(e,r);r.loading=!0,_combobox.call(e,r),n.push(e)}else r.loading=!0,a[i]?a[i].push(e):a[i]=[e],_combobox.call(e,r)});var r=Object.keys(a);r.length>0?fmx.CommonQueryService.getSelectCodeOpts(r,function(e){return e.code<0||!e.data?$.fn.combogrid.defaults.onLoadError(e.message):($.each(e.data,function(e,t){SELECT_CODE_OPTS[t.codeType]=t,$.each(a[t.codeType],function(e,a){var r=extendComboboxCodeOpts(a.data("combobox").options,t);$.isArray(r.queryFields)&&0!=r.queryFields.length||!SELECT_CODE_DATAS[t.codeType]?n.push(a):a.combobox("loadData",$.extend([],SELECT_CODE_DATAS[t.codeType]))})}),n.length>0&&initComboboxData(n),void $("body").trigger("resize"))}):n.length>0&&initComboboxData(n)}function extendComboboxCodeOpts(e,t){var n,a=t.codeType;n=window.COMBO_OPTIONS&&window.COMBO_OPTIONS[a]?window.COMBO_OPTIONS[a]:t;var r={codeType:a,idField:n.keyFieldName||t.keyFieldName,valueField:n.keyFieldName||t.keyFieldName,textField:n.labelFieldName||t.labelFieldName,queryFields:n.queryFields||t.queryFields};return $.extend(e,r)}function initComboboxData(e){var t=[],n=[],a={};$.each(e,function(e,r){var i=r.data("combobox").options,o=getQueryInfo(i),s=JSON.stringify(o),e=n.indexOf(s);e==-1&&(e=t.length,t.push(o),n.push(s)),a[e]?a[e].push(r):a[e]=[r]}),fmx.CommonQueryService.getSelectCodeDatas(t,function(e){return e.code<0?error(e.message):void $.each(e.data,function(e,t){var n=a[e];$.each(n,function(e,n){var a=n.data("combobox").options;$.isArray(a.queryFields)&&0!=a.queryFields.length||mergeCodeData(a,t.dataList),n.combobox("loadData",$.extend([],t.dataList))})})},$.fn.combogrid.defaults.onLoadError)}var SELECT_CODE_DATAS=fmx.getSelectCodeDatas(),SELECT_CODE_OPTS=fmx.getSelectCodeOpts(),_combobox=$.fn.combobox;$.fn.combobox=function(e,t){return"string"==typeof e?(this.each(function(){$.data(this,"combobox")||$(this).combobox({})}),_combobox.apply(this,[e,t])):(initCombobox(this,e||{}),this)},$.extend($.fn.combobox,_combobox);var _parseOpts=$.fn.combobox.parseOptions;$.fn.combobox.parseOptions=function(target){var opts=_parseOpts(target);"false"===target.getAttribute("emptyItemEnable")&&(opts.emptyItemEnable=!1);var val=target.getAttribute("emptyItemValue");return val&&(opts.emptyItemValue=val),val=target.getAttribute("emptyItemText"),val&&(opts.emptyItemText=val),opts.multiple&&(opts.emptyItemEnable=!1),val=target.getAttribute("query"),val&&(opts.query=val),val=target.getAttribute("codeType"),val&&(opts.codeType=val),val=target.getAttribute("orderBy"),val&&(opts.orderBy=val),val=target.getAttribute("queryFields"),val&&"{"==val.charAt(0)&&(opts.queryFields=eval(val)),opts},$.extend($.fn.combobox.defaults,{width:155,limitToList:!0,lazyLoad:!0,emptyItemEnable:!0,emptyItemValue:"",emptyItemText:"",filter:function(e,t){var n=$.data(this,"combobox").options;return(t[n.textField]+"").toUpperCase().indexOf(e.toUpperCase())>=0},loadFilter:function(e){var t=$.data(this,"combobox").options;return e=addEmptyItem(t,e),$.data(this,"combo").options.panelHeight=25*Math.min(e.length,10)+2,e},_loader:$.fn.combobox.defaults.loader,loader:function(e,t,n){function a(e){return e.code<0||!e.data?n.call(i[0],e.message):(e=e.data,mergeCodeData(o,e.dataList),void t(e.dataList))}function r(){var t=getQueryInfo(o,e);o.query?fmx.CommonQueryService.query(t,a,n):o.codeType&&fmx.CommonQueryService.getSelectCodeData(t,a,n)}var i=$(this),o=i.combobox("options");if(o.loading)return!1;if(!o.query&&!o.codeType)return o._loader.call(this,e,t,n);if(o.codeType){var s=SELECT_CODE_DATAS[o.codeType];if(s)return t($.extend([],s))}r()}}),$.extend($.fn.combobox.methods,{_setValue:$.fn.combobox.methods.setValue,setValue:function(e,t){return e.each(function(){var e=$(this);e.combobox("setValues",t),e.data("oldValues",e.combobox("getValues")),e.data("oldText",e.combobox("getText"))})}})}(jQuery,fmx),function(e,t){function n(e,t,n){var a=[];return t.queryFields&&(a=a.concat(t.queryFields)),t.commonQueryFields&&(a=a.concat(t.commonQueryFields)),n&&n.q&&a.push({fieldName:e.datagrid("getColumnFields").join(","),fieldValue:n.q,operator:"ilikeAnywhere"}),a}function a(a,r){function i(t){e.fn.datagrid.defaults.onLoadError(t)}var o=a.data("combogrid");r?e.isArray(r)||(r=r.toString().split(o.options.separator)):r=[];var s=a.combo("getValue"),l=r.join(o.options.separator);if(!s||s!=l){if(0==r.length)return o.options.selectedRows=[],void d(a,r);if(!o.options.codeType){var u=o.grid.data("datagrid"),c=[];if(u&&u.data&&e.isArray(u.data.rows))for(var f=0;f<u.data.rows.length;f++)e.easyui.addArrayItem(c,o.options.idField,u.data.rows[f]);return o.options.selectedRows=c,void d(a,r)}var h=n(a,o.options),m={fieldName:o.options.valueField};o.options.multiple?(m.operator="in",m.fieldValue=r):m.fieldValue=l,h.push(m);var p={query:o.options.codeType,queryFields:h};t.CommonQueryService.getSelectCodeData(p,function(t){if(!t||t.code<0||!t.data)return i(t?t.message:e.fn.datagrid.defaults.loadDataErrorMsg);var n=t.data.dataList,s=o.options.textField,d=o.options.idField,l=[],u=[],c=[];e.each(n,function(e,t){var n=t[d]+"";if(void 0!=n&&null!=n){for(var a=!1,e=0;e<r.length;e++)if(r[e]+""==n){a=!0;break}if(a){c.push(t);var i=t[s];return i&&l.push(i),u.push(n),!!o.options.multiple&&void 0}}}),o.options.selectedRows=c,a.combo("setText",l.join(o.options.separator)),a.combo("setValues",u)},i)}}function r(n,a){var r={};n.each(function(){var t=e(this),n=e.extend({unselectedValues:[],mappingRows:[],selectedRows:[]},e.fn.combogrid.parseOptions(this),a),d=n.codeType||t.attr("codeType");return d?(t.attr("comboname",t.attr("name")),void(o[d]?i(t,n,o[d]):(t.data("opts",n),r[d]?r[d].push(t):r[d]=[t]))):s.call(t,n)});var d=Object.keys(r);d.length>0&&t.CommonQueryService.getSelectCodeOpts(d,function(t){return t.code<0||!t.data||0==t.data.length?e.fn.combogrid.defaults.onLoadError(t.message):(e.each(t.data,function(t,n){o[n.codeType]=n,e.each(r[n.codeType],function(e,t){var a=t.data("opts");t.removeData("opts"),i(t,a,n)})}),void e("body").trigger("resize"))})}function i(n,a,r){var i,o=r.codeType;i=window.COMBO_OPTIONS&&window.COMBO_OPTIONS[o]?window.COMBO_OPTIONS[o]:e.extend({},r);var d=i.columns;d&&0!=d.length||(d=[{field:i.keyFieldName||r.keyFieldName},{field:i.labelFieldName||r.labelFieldName}]);var l={},u=[];e.each(d,function(n,a){var r=e.extend({},a,{title:t.getI18nTitle(i.i18nRoot,a.field,a.title),sortable:void 0==a.sortable||(1==a.sortable||"true"==a.sortable),formatter:a.formatter||e.fn.datagrid.defaults.formatter});r.codeType&&(l[r.field]=r.codeType),u.push(r)});var c={codeType:o,idField:i.keyFieldName||r.keyFieldName,valueField:i.keyFieldName||r.keyFieldName,textField:i.labelFieldName||r.labelFieldName,columns:[u],fieldCodeTypes:l,queryFields:i.queryFields||r.queryFields};s.call(n,e.extend(c,a))}var o=t.getSelectCodeOpts(),s=e.fn.combogrid;e.fn.combogrid=function(t,n){return"string"==typeof t?(this.each(function(){e.data(this,"combogrid")||e(this).combogrid({})}),s.apply(this,[t,n])):(r(this,t||{}),this)},e.extend(e.fn.combogrid,s),e.extend(e.fn.combogrid.defaults,{width:155,lazyLoad:!0,panelWidth:470,panelHeight:200,pagination:!0,rownumbers:!0,limitToGrid:!0,mode:"remote",_loader:e.fn.combogrid.defaults.loader,loader:function(a,r,i){var o=e(this),s=o.datagrid("options");if(!s.codeType)return s._loader.call(this,a,r,i);if(s._autoLoad||(s._autoLoad=s.value?2:1,1!=s._autoLoad)){var d=n(o,s,a);if(2==s._autoLoad){var l={fieldName:s.valueField,fieldValue:s.value};s.singleSelect?l.fieldValue=s.value:(l.operator="in",l.fieldValue=s.value.toString().split(s.separator)),d.push(l)}var u={query:s.codeType,fieldCodeTypes:s.fieldCodeTypes,queryFields:d,orderBy:a.sort?a.sort+" "+a.order:s.orderBy||""};s.pagination&&(u.pagingInfo={pageSize:a.rows,currentPage:a.page,pageNo:a.page,totalRows:o.datagrid("getPager").pagination("options").total}),t.CommonQueryService.getSelectCodeData(u,function(t){return!t||t.code<0?i(t?t.message:e.fn.datagrid.defaults.loadDataErrorMsg):void r(t)},i)}},loadFilter:e.fn.datagrid.defaults.loadFilter,onShowPanel:function(){var t=e.data(this,"combogrid");if(t&&t.grid){var n=t.grid.data("datagrid");n.data&&n.data.rows&&0!=n.data.rows.length&&2!=n.options._autoLoad||(n.options._autoLoad=1,t.grid.datagrid("reload"))}},onLoadError:e.fn.datagrid.defaults.onLoadError});var d=e.fn.combogrid.methods.setValues;e.extend(e.fn.combogrid.methods,{setQueryFields:function(t,n){return t.each(function(){e(this).combogrid("grid").datagrid("options").queryFields=n})},setValues:function(t,n){return t.each(function(){var t=e(this);a(t,n)})}})}(jQuery,fmx),function(e,t){function n(n,i){n.each(function(){var t=e(this);t.attr("comboname",t.attr("name"))});var o={};if(n.each(function(){var t=e(this),n=t.attr("codeType");n&&!o[n]&&(o[n]={})}),!e.isEmptyObject(o)){var s=[],d=[];for(var l in o)r[l]?s.push(l):d.push(l);s.length>0&&setTimeout(function(){e.each(s,function(e,t){a(n,t,r[t])})},0),d.length>0&&t.CommonQueryService.getSelectCodeOpts(d,function(e){setTimeout(function(){for(var t in e){var i=e[t];r[t]=i,a(n,t,i)}},0)}),delete i.combotree}}function a(t,n,a){var r={codeType:n,idField:a.keyFieldName,textField:a.labelFieldName,parentField:a.parentFieldName,orderBy:a.orderBy,queryFields:a.queryFields};t.filter("[codeType='"+n+"']").each(function(){var t=e(this),n=e.data(this,"combotree")?t.combotree("getValue"):e(this).val();e.data(this,"combotree")?t._combotree(e.extend(!0,t.combotree("options"),r)):e.data(this,"combo")?t._combotree(e.extend(!0,t.combo("options"),e.fn.combotree.parseOptions(this),r)):t.combotree(e.extend(!0,e.fn.combotree.parseOptions(this),r)),n&&t.combotree("setValue",n),t.combotree("options").onReady&&t.combotree("options").onReady.apply(t[0]),t.data("onReady")&&t.data("onReady").apply(t[0])})}var r=t.getSelectCodeOpts();e.fn._combotree=e.fn.combotree,e.fn.combotree=function(t,n){return"string"==typeof t&&this.each(function(){e.data(this,"combotree")||e(this).combotree({})}),e.fn._combotree.apply(this,[t,n])},e.fn.combotree.methods=e.fn._combotree.methods,e.fn.combotree.parseOptions=e.fn._combotree.parseOptions,e.fn.combotree.defaults=e.fn._combotree.defaults,e.extend(e.fn.combotree.defaults,e.fn.tree.defaults,{panelWidth:250,panelHeight:300,width:155,onLoadSuccess:function(n,a){function r(t){s[t.id]=t.text,t.children&&e.each(t.children,function(e,t){r(t)})}var i=e(this),o=i.tree("options").codeType,s={};e.each(a,function(e,t){r(t)}),t.mergeSelectCodeValues(o,s)}}),e.extend(e.fn.combotree.methods,{_setValue:e.fn.combotree.methods.setValue,setValue:function(t,n){return t.each(function(){var t=e(this);t.combotree("setValues",n?(n+"").split(","):[])})}}),e(e.parser).on("onBefore",function(e,t,a){n(a.combotree,a)})}(jQuery,fmx),function(e){e.extend(e.fn.treegrid.methods,{getSelectedId:function(t){var n=e(t[0]),a=n.treegrid("getSelected");if(a){var r=n.treegrid("options").idField;return n.treegrid("getSelected")[r]}return null},getSelectionsId:function(t){for(var n=e(t[0]),a=n.treegrid("options").idField,r=n.treegrid("getSelections"),i=[],o=0;o<r.length;o++)i.push(r[o][a]);return i},forceEndEdit:e.fn.datagrid.methods.forceEndEdit,_append:e.fn.treegrid.methods.append,append:function(t,n){return t.each(function(){var t=e(this);if(t.treegrid("endEditWithReturn")){var a=t.treegrid("options").idField,r=t.treegrid("options").parentField,i=t.treegrid("options").treeField;e.isArray(n.data)||(n.data=[n.data]),e.each(n.data,function(e,t){t[r]=n.parent,t[a]||(t[a]="id_"+(new Date).getTime()),t[i]||(t[i]="new")}),t.treegrid("_append",n);var o=t.treegrid("options").editConfig.getTr(this,n.data[0][a])[0];o&&o.click(),e.data(this,"datagrid").insertedRows.push(n.data[0])}})},updateRow:function(t,n){var a=e(t[0]);a.treegrid("forceEndEdit");var r=t[0],i=e.data(r,"datagrid").options,o=e.data(r,"datagrid").insertedRows,s=e.data(r,"datagrid").updatedRows;if(o.indexOf(n.row)==-1){var d=i.editConfig.getRow(r,n.id);if(d==n.row)s.push(n.row);else{var l=!1;for(var u in d)if(d[u]!=n.row[u]){l=!0;break}e.extend(d,n.row),n.row=d,l&&s.indexOf(n.row)==-1&&s.push(n.row)}}return a.treegrid("refresh",n.id)},__remove:e.fn.treegrid.methods.remove,_remove:function(t,n){return t.each(function(){function t(n){r.indexOf(n)>=0?r.remove(n):i.indexOf(n)==-1&&i.push(n),n.children&&e.each(n.children,function(e,n){t(n)})}var a=e(this),r=a.treegrid("_getChanges","inserted"),i=a.treegrid("_getChanges","deleted"),o=a.treegrid("find",n);t(o),a.treegrid("__remove",n)})},remove:function(t,n){return t.each(function(){var t=e(this);t.treegrid("forceEndEdit").treegrid("_remove",n)})},removeSelectedNodes:function(t){return t.each(function(){var t=e(this);t.treegrid("forceEndEdit"),e.each(t.treegrid("getSelectionsId"),function(e,n){t.treegrid("_remove",n)})})},_loadData:e.fn.treegrid.methods.loadData,loadData:function(t,n){return t.each(function(){var t=e(this);t.treegrid("forceEndEdit"),t.treegrid("_loadData",n)})},getChanges:function(t,n){function a(t){t.children&&e.each(t.children,function(e,n){n[o]=t[i],a(n)})}var r=e(t[0]),i=r.treegrid("options").idField,o=r.treegrid("options").parentField,s=r.datagrid("getChanges",n);return e.each(s,function(e,t){a(t)}),s},refreshSavedData:function(t,n){return t.each(function(){for(var t=e(this),a=t.treegrid("options").idField,r=t.treegrid("_getChanges","inserted"),i=t.treegrid("_getChanges","updated"),o=[].concat(r).concat(i),s=0;s<o.length;s++)t.treegrid("options").editConfig.getTr(this,o[s][a]).attr("node-id",n[s][a]),e.extend(o[s],n[s]),t.treegrid("refresh",n[s][a]);t.datagrid("acceptChanges")})},reloadAndSelect:function(t,n){return t.each(function(){var t=e(this);t.data("selectedId",n),t.treegrid("reload")})}})}(jQuery),function(e,t){function n(e,t){var n=a.call(e,t);return n instanceof Date?!isNaN(n.getYear())&&n.getYear()>0:!!n}function a(e){if(!e)return null;if(e instanceof Date)return e;if("string"==typeof e&&e.indexOf("T")>-1)return new Date(e);var t=r(this),n=moment(e,t,!0);return n.isValid()?n.toDate():null}function r(t){var n=e.data(t,"datebox")||e.data(t,"validatebox");return n?(n.options?n.options.pattern:null)||pageContext.defaultDateFormat||"YYYY-MM-DD":pageContext.defaultDateFormat||"YYYY-MM-DD"}function i(t,n){if(""==e.trim(n))return new Date;var a=e.data(t,"datetimebox")||e.data(t,"validatebox");if(!a||!a.options)return null;if(a.options.strict){var i=r(t);i=a.options.showSeconds?i+" HH"+a.options.timeSeparator+"mm"+a.options.timeSeparator+"ss":i+" HH"+a.options.timeSeparator+"mm";var o=moment(n,i,!0);if(o.isValid())return o.toDate()}else{var s=n.split(" "),d=e.fn.datebox.defaults.parser.call(t,s[0]);if(s.length<2||!d)return d;
var i;i=a.options.showSeconds?"HH"+a.options.timeSeparator+"mm"+a.options.timeSeparator+"ss":"HH"+a.options.timeSeparator+"mm";var l=moment(s[1],i,!0);if(l.isValid())return d.setHours(l.hour()),d.setMinutes(l.minute()),d.setSeconds(l.second()),d}return null}var o=e.fn.datebox.parseOptions;e.fn.datebox.parseOptions=function(e){var t=o(e),n=e.getAttribute("pattern");return n&&(t.pattern=n),t},e.extend(e.fn.datebox.defaults,{width:155,validType:"date",formatter:function(e){var n=r(this),a=t.formatters.formatDate(e,n);return"Invalid date"==a?null:a},parser:function(e){return a.call(this,e)},validator:function(e){return n(this,e)},validateOnBlur:!0}),e.extend(e.fn.datebox.defaults.rules,{date:{validator:function(e){return n(this,e)},message:"请输入正确的日期格式！"}});var s=e.fn.datebox.methods.setValue;e.fn.datebox.methods.setValue=function(e,t){if(t instanceof Date)return s(e,t);var n=a.call(this,t);return n?s(e,n):s(e,null)},e.fn.calendar.defaults.validator=e.fn.datebox.defaults.validator,e.extend(e.fn.datetimebox.defaults,{validType:"datetime",validateOnBlur:!0,strict:!1,parser:function(e){return i(this,e)},validator:function(e){return!!i(this,e)}}),e.extend(e.fn.datetimebox.defaults.rules,{datetime:{validator:function(e){return!!i(this,e)},message:"请输入正确的日期时间格式！"}})}(jQuery,fmx),function(e,t){function n(t,n){var i=e.data(t,"form").options;e.extend(i,n||{});var o=e.extend({},i.queryParams);if(0!=i.onSubmit.call(t,o)){if(!i.isDownload){if(e.data(t,"submitting"))return e.messager.alert("",e.fn.form.defaults.submittingMsg);e.data(t,"submitting",!0),i.maskit&&i.maskit.maskit()}var s=e(t).find(".textbox-text:focus");s.triggerHandler("blur"),s.focus();var d=null;if(i.dirty){var l=[];e.map(i.dirtyFields,function(t){e(t).hasClass("textbox-f")?e(t).next().find(".textbox-value").each(function(){l.push(this)}):l.push(t)}),d=e(t).find("input[name]:enabled,textarea[name]:enabled,select[name]:enabled").filter(function(){return e.inArray(this,l)==-1}),d.attr("disabled","disabled")}i.ajax?i.iframe?a(t,o):r(t,o):e(t).submit(),i.dirty&&d.removeAttr("disabled")}}function a(t,n){function a(n){var a=e(t);o.url&&a.attr("action",o.url);var i=a.attr("target"),d=a.attr("action");a.attr("target",s);var l=e();try{for(var u in n){var c=e('<input type="hidden" name="'+u+'">').val(n[u]).appendTo(a);l=l.add(c)}r(),a[0].submit()}finally{a.attr("action",d),i?a.attr("target",i):a.removeAttr("target"),l.remove()}}function r(){var t=e("#"+s);if(t.length)try{var n=t.contents()[0].readyState;n&&"uninitialized"==n.toLowerCase()&&setTimeout(r,100)}catch(e){i()}}function i(){var n=e("#"+s);if(n.length){n.unbind();var a="";try{var r=n.contents().find("body");if(a=r.html(),""==a&&--l)return void setTimeout(i,100);var d=r.find(">textarea");if(d.length)a=d.val();else{var u=r.find(">pre");u.length&&(a=u.html())}}catch(e){}o.success.call(t,a),setTimeout(function(){e.data(t,"submitting",!1),o.maskit&&o.maskit.maskit("unmask"),n.unbind(),n.remove()},100)}}var o=e.data(t,"form").options,s="easyui_frame_"+(new Date).getTime(),d=e("<iframe id="+s+" name="+s+"></iframe>").appendTo("body").attr("src",window.ActiveXObject?"javascript:false":"about:blank");d.css({position:"absolute",top:-1e3,left:-1e3}),d.bind("load",i),a(n);var l=10}function r(t,n){var a,r=e.data(t,"form").options,i=!1;if(r.contentType&&r.contentType.toLowerCase().indexOf("json")!=-1){var o=e(t).form("getData");e.extend(!0,o,n),a=JSON.stringify(o),i="application/json;charset=utf-8"}else{a=new FormData(e(t)[0]);for(var s in n)a.append(s,n[s])}e.ajax({url:r.url,type:"post",xhr:function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){if(e.lengthComputable){var n=e.total,a=e.loaded||e.position,i=Math.ceil(100*a/n);r.onProgress.call(t,i)}},!1),n},data:a,dataType:"html",cache:!1,contentType:i,processData:!1,complete:function(n){e.data(t,"submitting",!1),r.maskit&&r.maskit.maskit("unmask"),r.success.call(t,n.responseText,n)}})}function i(t){e("input,select,textarea",t).each(function(){var t=this.type,n=this.tagName.toLowerCase();if("text"==t||"hidden"==t||"password"==t||"textarea"==n)this.value="";else if("file"==t){var a=e(this);if(!a.hasClass("textbox-value")){var r=a.clone().val("");r.insertAfter(a),a.data("validatebox")?(a.validatebox("destroy"),r.validatebox()):a.remove()}}else"checkbox"==t||"radio"==t?this.checked=!1:"select"==n&&(this.selectedIndex=-1)});for(var n=e(t),a=e.data(t,"form").options,r=a.fieldTypes.length-1;r>=0;r--){var i=a.fieldTypes[r],o=n.find("."+i+"-f");o.length&&o[i]&&o[i]("clear")}a.validateOnClearAndRest&&n.form("validate")}function o(t){t.reset();for(var n=e(t),a=e.data(t,"form").options,r=a.fieldTypes.length-1;r>=0;r--){var i=a.fieldTypes[r],o=n.find("."+i+"-f");o.length&&o[i]&&o[i]("reset")}a.validateOnClearAndRest&&n.form("validate")}function s(n,a){a&&e.isPlainObject(a)&&(a=t.utils.paramObject(a),u(e(n),a),e.data(n,"oldData",a))}function d(t,n){var a=e.data(t,"form").options;if("string"==typeof n){var r={};if(0==a.onBeforeLoad.call(t,r))return;0==n.indexOf("/rest/")&&(n=$url(n)),e.ajax({url:n,data:r,dataType:"json",success:function(n){return"string"==e.type(n)&&(n=e.parseJSON(n)),n.code<0?(e.messager.alert("错误提示",n.message||"数据加载出错了!","error"),void a.onLoadError.apply(t,n)):(n.data&&(n=n.data),void s(t,n))},error:function(){a.onLoadError.apply(t,arguments)}})}else s(t,n)}function l(n){e("input[disabled]",n).attr("disabled_fixed",!0),e("textarea[disabled]",n).attr("disabled_fixed",!0),e("input[readonly]",n).attr("readonly_fixed",!0),e("textarea[readonly]",n).attr("readonly_fixed",!0),n.filter("[columns]").each(function(){var n=e(this),a=e("<div/>").insertBefore(n),r=n.attr("columns")||3,i="down"==(n.attr("direction")||pageContext.formTabIndexDirection),o=n.children(":not([type=hidden])");if(n.detach(),i){var s=Math.floor(o.size()/r);o.length%r>0&&s++;for(var d=[],l=0;l<s;l++)for(var u=0;u<r;u++)d.push(o[l+u*s]);o=e(d),n.find("input").each(function(t,n){e(n).attr("tabindex",t+1)})}var c,f=e("<table/>").appendTo(n),h=0;o.each(function(a,o){var s=e(o);if((0==h||h>=r)&&(c=e("<tr/>").appendTo(f),h=0),o){var d=s.next(),l=s.attr("name");l||(l=s.find("[name]").attr("name")),!l&&d.hasClass("combo")&&(l=d.find("[name]").attr("name")),l||(l=s.attr("comboname")),l||(l=s.find("[comboname]").attr("comboname"));var u=s.attr("title");u?s.removeAttr("title"):(u=s.find("[name]").attr("title"),u&&s.find("[name]").removeAttr("title"));var m=s.attr("colspan");m||(m=s.find("[name]").attr("colspan"));var p=t.getI18nTitle(n.attr("i18nRoot"),l,u);"NONE"==p||(p?((s.attr("required")||s.find("[required]").size()>0)&&(p="<span style='color: red;'>* </span>"+p),c.append("<td class='form-label' align='right'> "+p+"</td>")):c.append("<td class='form-label' />"));var g=e("<td/>").appendTo(c).append(s);d.hasClass("combo")&&g.append(d),h++,(m&&!i||"NONE"==p)&&(m=parseInt(m)||1,h+=m-1,m=2*m-1,"NONE"==p&&m++,g.attr("colspan",m),s.css("width","100%"))}}),n.insertAfter(a),a.detach()})}e.fn.form._parseOptions=e.fn.form.parseOptions,e.fn.form.parseOptions=function(n){var a=e.fn.form._parseOptions.call(n,n);if(a.contentType||(a.contentType=n.getAttribute("contentType")||n.getAttribute("content-type")||n.getAttribute("enctype")),!a.validateOnClearAndRest){var r=n.getAttribute("validateOnClearAndRest");a.validateOnClearAndRest=1==r||"true"==r}return a.url&&(a.url=$url(a.url)),a.contentType&&(a.iframe=a.contentType.toLowerCase().indexOf("json")<0),n.getAttribute("maskit")&&(a.maskit=n.getAttribute("maskit")),a.maskit&&(a.maskit=t.utils.getJquery(a.maskit)),a};var u=e.fn.form.methods.load;e.extend(e.fn.form.defaults,{submittingMsg:"Please waiting for the form is submitting.",validateOnClearAndRest:!1}),e.extend(e.fn.form.methods,{clear:function(e){return e.each(function(){i(this)})},reset:function(e){return e.each(function(){o(this)})},load:function(e,t){return e.each(function(){d(this,t)})},submit:function(e,t){return e.each(function(){n(this,t)})},setData:function(e,t){return e.form("load",t)},getData:function(t){var n=e(t[0]),a={},r=n.find(".textbox-text:focus");return r.triggerHandler("blur"),r.focus(),n.find("input[name][class!='textbox-value'],textarea[name],select[name]").each(function(){var t=e(this),r=t.attr("name");"checkbox"==t.attr("type")?a[r]=function(){var t=[];return n.find("input[name='"+r+"']:checked").each(function(){t.push(e(this).attr("on")||e(this).attr("value"))}),t.join(",")}():"radio"==t.attr("type")?a[r]=n.find("input[name='"+r+"']:checked").attr("value"):t.hasClass("easyui-numberbox")?a[r]=t.numberbox("getValue"):a[r]=t.val()}),n.find("input[comboname],select[comboname],input[textboxname]").each(function(){var t=e(this),n=t.attr("comboname")||t.attr("textboxname"),r=e.data(this,"combo")||e.data(this,"textbox"),i=!!t.attr("multiple");r?i?a[n]=t.combo("getValues").join(","):a[n]=t.textbox("getValue"):a[n]=t.val()}),e.extend({},n.data("data"),a)},getQueryFields:function(t){var n=e(t[0]),a=n.find(".textbox-text:focus");a.triggerHandler("blur"),a.focus();var r=[],i=[];return n.find("input[name][class!='textbox-value'],textarea[name],select[name]").each(function(){var t=e(this),a=t.attr("name"),o=t.val();if(o&&!(i.indexOf(a)>=0)){var s=t.attr("dataType"),d=t.attr("operator");if("checkbox"==t.attr("type")){d=t.closest("[operator]").attr("operator");var l=[];return n.find("input[name='"+a+"']:checked").each(function(){l.push(e(this).attr("on")||e(this).attr("value"))}),r.push({fieldName:a,fieldType:"String[]",fieldStringValue:l.join(","),operator:d}),void i.push(a)}if("radio"==t.attr("type"))return d=t.closest("[operator]").attr("operator"),o=n.find("input[name='"+a+"']:checked").attr("value"),r.push({fieldName:a,fieldType:s,fieldStringValue:o,operator:d}),void i.push(a);t.hasClass("easyui-numberbox")&&(o=t.numberbox("getValue")),r.push({fieldName:a,fieldType:s,fieldStringValue:o+"",operator:d})}}),n.find("input[comboname],select[comboname],input[textboxname]").each(function(){var t,n=e(this),a=n.attr("operator"),i=e.data(this,"combo"),o=n.attr("comboname")||n.attr("textboxname"),s=!!n.attr("multiple");t=i?s?n.combo("getValues"):n.textbox("getValue"):n.val(),t&&""!=t&&0!=t.length&&r.push({fieldName:o,fieldType:s?n.attr("dataType")||"String[]":n.attr("dataType"),fieldStringValue:s?t.join(","):t,operator:a})}),r},dataChanged:function(t){var n=e(t[0]);return JSON.stringify(n.data("oldData"))!=JSON.stringify(n.form("getData"))},disable:function(t){return t.each(function(){var t=e(this);t.find("input[name]:not(.combo-value):not([disabled_fixed],[readonly_fixed])").attr("disabled","disabled"),t.find("textarea[name]:not([disabled_fixed],[readonly_fixed])").attr("disabled","disabled"),t.find("input.combo-f:not([disabled_fixed],[readonly_fixed])").combo("disable")})},enable:function(t){return t.each(function(){var t=e(this);t.find("input[name]:not(.combo-value):not([disabled_fixed],[readonly_fixed])").removeAttr("disabled"),t.find("textarea[name]:not([disabled_fixed],[readonly_fixed])").removeAttr("disabled"),t.find("input.combo-f:not([disabled_fixed],[readonly_fixed])").combo("enable")})},readonly:function(t,n){return t.each(function(){var t=e(this);n=void 0==n||n,t.find("input[name]:not(.combo-value):not([disabled_fixed],[readonly_fixed])").attr("readonly",n),t.find("textarea[name]:not([disabled_fixed],[readonly_fixed])").attr("readonly",n),t.find("input.combo-f:not([disabled_fixed],[readonly_fixed])").combo("readonly",n)})},fitHeight:function(t){return t.each(function(){var t=e(this);if(!t.data("fittedHeight")&&0!=t.find("table").size()&&0==t.closest(".panel:hidden").size()){var n=t.closest("div[region='north'], div[region='south']");if(n.size()>0){var a=e("<div/>");a.append(n.children()).appendTo(n);var r=a.height()+4;!n.panel("options").noheader&&n.panel("options").title&&(r+=26),n.panel("resize",{height:r}),n.closest(".easyui-layout").layout("resize")}t.data("fittedHeight",!0)}})},resetOld:e.fn.form.methods.reset,reset:function(t){return t.each(function(){var t=this;e("input,select,textarea",t).each(function(){var t=e(this),n=this.type,a=this.tagName.toLowerCase();if(this.hasAttribute("textboxname")){var r=t.attr("class")||"";r.indexOf("combogrid-f")>-1?t.combogrid("reset"):r.indexOf("combobox-f")>-1?t.combobox("reset"):r.indexOf("textbox-f")>-1&&t.textbox("reset")}else{if(t.hasClass("textbox-value")||t.hasClass("textbox-text"))return;if("text"==n||"hidden"==n||"password"==n||"textarea"==a)this.value="";else if("file"==n){var i=e(this);if(!i.hasClass("textbox-value")){var o=i.clone().val("");o.insertAfter(i),i.data("validatebox")?(i.validatebox("destroy"),o.validatebox()):i.remove()}}else"checkbox"==n||"radio"==n?this.checked=!1:"select"==a&&(this.selectedIndex=-1)}})})}}),e(e.parser).on("onBefore",function(e,t,n){l(n.form)}).on("onComplete",function(t,n,a){a.form.each(function(){var t=e.fn.form.methods.getData(e(this));e.data(this,"oldData",t)})})}(jQuery,fmx),function(e,t){function n(n){n.each(function(){var n=e(this),a=n.attr("code");a&&!t.checkFunctionAuthorization(a)&&(n.attr("hideNoPermission")?n.detach():n.linkbutton("forceDisable"))})}e.extend(e.fn.linkbutton.methods,{forceDisable:function(t){return t.each(function(){var t=e(this);t.data("forceDisable",!0),t.linkbutton("disable")})},_enable:e.fn.linkbutton.methods.enable,enable:function(t){return t.each(function(){var t=e(this);t.data("forceDisable")||t.linkbutton("_enable")})}}),e(e.parser).on("onComplete",function(e,t,a){n(a.linkbutton)})}(jQuery,fmx),function(e){e.extend(!0,e.messager.defaults,{toastTimeout:1e3}),e.messager.toast=function(t,n,a,r){var i=e.messager.alert(t,n,a,r);i.parent().find(".window-header").hide(),i.find(".messager-button").hide(),i.parent().next().height(i.parent().height()+12),setTimeout(function(){i.window("close")},e.messager.defaults.toastTimeout)}}(jQuery),function(e,t){function n(t,n){t.each(function(){var t=e(this),n=e.data(this,"numberbox").options;e.extend(n,{format:t.attr("format")?t.attr("format"):null,precision:t.attr("format")?10:n.precision})})}e.fn._numberbox=e.fn.numberbox,e.fn.numberbox=function(t,n){var a=e.fn._numberbox.apply(this,[t,n]);return"string"!=typeof t&&this.each(function(){var t=this;e(t).unbind("blur.numberbox").bind("blur.numberbox",function(){e(t).numberbox("fix")})}),a},e.fn.numberbox.methods=e.fn._numberbox.methods,e.fn.numberbox.defaults=e.fn._numberbox.defaults,e.fn.numberbox.parseOptions=e.fn._numberbox.parseOptions,e.extend(e.fn.numberbox.methods,{_fix:e.fn.numberbox.methods.fix,fix:function(t){return t.each(function(){var t=e(this);t.val(t.numberbox("getValue")),t.numberbox("_fix"),t.numberbox("setValue",t.numberbox("getValue"))})}}),e(e.parser).on("onComplete",function(e,t,a){n(a.numberbox)})}(jQuery,fmx),function(e){e.extend(e.fn.panel.defaults,{reLoginMsg:"Session timeout. Please re-login and try again.",setDefaultContextErrorMsg:"JQuery selectors detected in the page. But default context can't be set automatically cause '$(function(){...})' can't be located. Please fix the page source code!",extractor:function(t){if(/<!--LoginPage-->/im.exec(t))return e.messager.confirm("Message",e.fn.panel.defaults.reLoginMsg,function(e){e&&window.location.reload()}),"";var n=t.indexOf("$(function(");if(n>=0&&(index2=t.indexOf("{",n),index2>=0)){var a=e.now();return e(this).attr("_contextid",a),t=t.substring(0,n)+"($('[_contextid="+a+"]').panel('options').onLoadAsync = "+t.substring(n+2,index2+1)+"\n\nvar _pageContext = jQuery('[_contextid="+a+"]');\nvar $ = function(selector, context) {\n\tif (context) {\n\t\treturn jQuery(selector, context);\n\t} else {\n\t\treturn jQuery(selector, _pageContext);\n\t}\n};\njQuery.extend($, jQuery);\nPREVENT_REINIT_PLUGINS = true;\nsetTimeout(function() {\n\tPREVENT_REINIT_PLUGINS = false;\n}, 0);\n"+t.substring(index2+1)}return t.indexOf("$(")>=0&&e.messager.alert("Message",e.fn.panel.defaults.setDefaultContextErrorMsg,"error"),t}}),e.extend(e.fn.panel.methods,{loading:function(t){return t.each(function(){var t=e(this);e("<div class='datagrid-mask panel' style='z-index: 10000;'></div>").css({display:"block",width:t.width(),height:t.height()}).appendTo(t),e("<div class='datagrid-mask-msg panel' style='z-index: 10000;'></div>").html(e.fn.datagrid.defaults.loadMsg).appendTo(t).css({display:"block",left:(t.width()-e("div.datagrid-mask-msg",t).outerWidth())/2,top:(t.height()-e("div.datagrid-mask-msg",t).outerHeight())/2})})},loaded:function(t){return t.each(function(){var t=e(this);t.children("div.datagrid-mask-msg").remove(),t.children("div.datagrid-mask").remove()})}})}(jQuery),function(e){}(jQuery),function(e,t){function n(t){t.each(function(){var t=e(this),n=t.children().children();n.children(".dialog-buttons").addClass("dialog-button").appendTo(t),n.children(".dialog-toolbars").addClass("dialog-toolbar").prependTo(t),n.children(".dialog-button").appendTo(t),n.children(".dialog-toolbar").prependTo(t)})}e.extend(e.fn.window.defaults,{inline:!0,modal:!0,onOpen:function(){var t=e(this);t.window("resize");var n=t.parent().position(),a=t.parent().offset(),r=(window.document.body.clientWidth-t.parent().outerWidth())/2,i=(window.document.body.clientHeight-t.parent().outerHeight())/2;t.window("move",{left:n.left-(a.left-r),top:n.top-(a.top-i)}),t.data("preFocus",e("*:focus")),t.find("a").unbind("keydown").bind("keydown",function(t){13==t.keyCode||32==t.keyCode?(t.target.click(),t.preventDefault()):27==t.keyCode&&(e(this).closest(".window").find(".panel-tool-close").click(),t.preventDefault())}),t.find("a:first").focus(),t.find("input:visible:enabled:first").focus()},onBeforeClose:function(){var t=e(this);t.data("preFocus")&&t.data("preFocus").focus()},onMove:function(t,n){var a=e(this),r=a.parent().offset();(r.left<0||r.top<0)&&a.window("move",{left:t-Math.min(r.left,0),top:n-Math.min(r.top,0)})}}),e.extend(e.fn.dialog.defaults,{inline:!0,onOpen:e.fn.window.defaults.onOpen,onBeforeClose:e.fn.window.defaults.onBeforeClose,onMove:e.fn.window.defaults.onMove}),e(e.parser).on("onComplete",function(e,t,a){n(a.dialog)})}(jQuery,fmx),function($,fmx){function Buttons(e,t){var n=[{iconCls:"icon-search",text:"查询",default:!0,handler:function(){var e=getReportParam(t.paramForm);if(0!=e){var n=t.pagination.pagination("options").pageNumber;showLoading(t,!0,!0),e.pageNo=n,e.reportId=t.reportId,e.rptCode=t.rptCode,t.form.form("submit",{queryParams:e,url:htmlUrl,iframe:!1,isDownload:!1,ajax:!0,success:function(e,n){if(showLoading(t,!1,!0),n&&$.isFunction(n.getResponseHeader)){var a=parseInt(n.getResponseHeader("total-page"));a&&a!=t.pagination.pagination("options").total&&t.pagination.pagination("refresh",{total:a})}showReportContent(e,t)}})}}},{iconCls:"icon-save",text:"导出当前页",menu:1,handler:function(e){if(!e||!e.name)return void $.messager.alert("提示","unknow export type！");var n=t.pagination.pagination("options").pageNumber;exportReport(t.form,t.paramForm,{exportType:e.name,reportId:t.reportId,rptCode:t.rptCode,startPageNo:n,endPageNo:n,exportParam:getExportParam(t,e.name),success:function(e){"string"==typeof e&&(e=JSON.parse(e),e.message&&$.messager.alert("提示",e.message))}})}},{iconCls:"icon-save",menu:2,text:"导出全部",handler:function(e){return e&&e.name?void exportReport(t.form,t.paramForm,{exportType:e.name,reportId:t.reportId,rptCode:t.rptCode,exportParam:getExportParam(t,e.name),success:function(e){"string"==typeof e&&(e=JSON.parse(e),e.message&&$.messager.alert("提示",e.message))}}):void $.messager.alert("提示","unknow export type！")}},{iconCls:"icon-print",text:"打印当前页",handler:function(){showLoading(t,!0);var e=t.pagination.pagination("options").pageNumber;printReport(t.form,t.paramForm,{reportId:t.reportId,rptCode:t.rptCode,printParam:getPrintParam(t),startPageNo:e,endPageNo:e,success:function(e){showLoading(t,!1),e=JSON.parse(e),0==e.code?$.messager.alert("提示","后台已成功发送打印任务！"):e.message&&$.messager.alert("提示",e.message)}})}},{iconCls:"icon-print",text:"打印全部",handler:function(){showLoading(t,!0),printReport(t.form,t.paramForm,{reportId:t.reportId,rptCode:t.rptCode,printParam:getPrintParam(t),success:function(e){showLoading(t,!1),e=JSON.parse(e),0==e.code?$.messager.alert("提示","后台已成功发送打印任务！"):e.message&&$.messager.alert("提示",e.message)}})}}];return n}function exportReport(e,t,n){var a=getReportParam(t,n.reportParam);0!=a&&(a.exportType=n.exportType,a.reportId=n.reportId,a.rptCode=n.rptCode,a.exportParam=n.exportParam,n.startPageNo&&(a.startPageNo=n.startPageNo),n.endPageNo&&(a.endPageNo=n.endPageNo),e.form("submit",{queryParams:a,url:exportUrl,iframe:!0,isDownload:!0,ajax:!0,success:n.success}))}function printReport(e,t,n){var a=getReportParam(t,n.reportParam);0!=a&&(a.reportId=n.reportId,a.rptCode=n.rptCode,a.printParam=n.printParam,n.startPageNo&&(a.startPageNo=n.startPageNo),n.endPageNo&&(a.endPageNo=n.endPageNo),e.form("submit",{queryParams:a,url:printUrl,iframe:!1,isDownload:!1,ajax:!0,success:n.success}))}function getExportParam(e,t){var n=e.exportParam||{};return e.onExportParam&&e.onExportParam(n,t),JSON.stringify(n)}function getPrintParam(e){var t=e.printParam||{};return e.onPrintParam&&e.onPrintParam(t),JSON.stringify(t)}function getReportParam(e,t){var n={};if(e){var a=fmx.utils.getJquery(e);if(!a)return $.messager.alert("message","unkow selector："+e),!1;if(0==a.form("validate"))return!1;$.extend(n,a.form("getData")),$.extend(n,getQueryInfos(a))}return t&&$.extend(n,t),$.each(n,function(e,t){($.isPlainObject(t)||$.isArray(t))&&(n[e]=JSON.stringify(t))}),{reportParam:JSON.stringify(n)}}function getQueryInfos(e){var t={};return e.find("input[queryField],textarea[queryField],select[queryField]").each(function(){var e=$(this),n=$.data(this,"combo")||$.data(this,"textbox"),a=e.attr("queryField")||e.attr("textboxname")||e.attr("comboname")||e.attr("name");if(a){var r=null,i=!!e.attr("multiple");if(r=n?i?e.combo("getValues").join(","):e.textbox("getValue"):e.val(),r&&""!=r&&0!=r.length){var o=e.attr("jrField")||"queryFields",s=t[o]||(t[o]=[]);s.push({fieldName:a,fieldType:i?e.attr("dataType")||"String[]":e.attr("dataType"),fieldStringValue:r,operator:e.attr("operator")})}}}),t}function showLoading(e,t,n){if(t){if(e.pagination.pagination("loading"),e.container.maskit(),n){var a=e.view.parent();if(!a.children("div.datagrid-mask").length){$('<div class="datagrid-mask" style="display:block"></div>').appendTo(a);var r=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(e.loadMsg).appendTo(a);r._outerHeight(40),r.css({marginLeft:-r.outerWidth()/2,lineHeight:r.height()+"px"})}}}else if(e.pagination.pagination("loaded"),e.container.maskit("unmask"),n){var a=e.view.parent();a.children("div.datagrid-mask-msg").remove(),a.children("div.datagrid-mask").remove()}}function buildMenu(e,t){var n=$('<div style="width:120px;display:none"></div>');return $.each(t.exportTypes,function(e,t){n.append('<div name="'+t.type+'">'+t.text+"</div>")}),n.attr("id","exportMenu_"+e.menu),n.appendTo("body"),n}function buildButtons(e,t){var n=$('<div style="padding:2px 0;float:left;">'),a=new Buttons(e,t);$.each(a,function(e,a){var r=$('<a href="#"></a>').text(a.text).appendTo(n);if(a.default&&r.attr("default",a.default),a.menu){var i=buildMenu(a,t).menu({onClick:a.handler});r.menubutton({menu:"#"+i.attr("id"),iconCls:a.iconCls})}else r.linkbutton({iconCls:a.iconCls,onClick:a.handler})}),n.appendTo(t.container)}function buildForm(){return $("<form></form>").form({iframe:!1}).appendTo("body")}function buildReportView(e){e?"#"!=e.charAt(0)&&(e="#"+e):e="body";var t=$("<iframe scrolling='auto' frameborder='0' style='width:100%;height:99%' marginwidth='0px' marginheight='0px' ></iframe>");return t.appendTo(e).attr("src",window.ActiveXObject?"javascript:false":"about:blank"),t}function showReportContent(e,t){if(e&&"{"==e.charAt(0)){var n=JSON.parse(e);return void $.messager.alert("错误","展现报表错误："+n.message)}var a=t.view,r=a.contents();r.find("html").html(e||"");var i=r[0].documentElement.scrollHeight;a.height(i)}function init(e){var t=$.data(e[0],"report"),n=t.options;if(!n.reportId&&!n.rptCode)return void $.messager.alert("提示","请为控件绑定报表代码！");n.container=e.empty(),n.view=buildReportView(n.reportView),n.form=buildForm(),buildButtons(e,n);var a={total:1,pageSize:1,pageList:[1],showPageList:!1,showRefresh:!1,layout:["first","prev","manual","next","last","links"],onSelectPage:function(e){n.container.find("a[default]").click()},onRefresh:function(){n.container.find("a[default]").click()}};n.pagination=$("<div></div>").appendTo(e).pagination(a)}function parseOptions($jq){var rptId=$jq.attr("rptId")||$jq.attr("reportId"),opts={},rptCode=$jq.attr("reportCode")||$jq.attr("rptCode"),paramForm=$jq.attr("paramForm"),reportView=$jq.attr("reportView");paramForm&&"#"!=paramForm.charAt(0)&&(paramForm="#"+paramForm),reportView&&"#"!=reportView.charAt(0)&&(reportView="#"+reportView),rptId||(rptId=$getParam("rptId")||$getParam("reportId")),rptCode||(rptCode=$getParam("reportCode")||$getParam("rptCode"));var temp=$jq.attr("exportParam");return temp&&"{"==temp.charAt(0)&&(opts.exportParam=eval(temp)),temp=$jq.attr("printParam"),temp&&"{"==temp.charAt(0)&&(opts.printParam=eval(temp)),temp=$jq.attr("exportTypes"),temp&&"["==temp.charAt(0)&&(opts.exportTypes=eval(temp)),temp=$jq.attr("onReportParam"),temp&&(opts.onReportParam=eval(temp)),temp=$jq.attr("onPrintParam"),temp&&(opts.onPrintParam=eval(temp)),temp=$jq.attr("onExportParam"),temp&&(opts.onExportParam=eval(temp)),rptId&&(opts.reportId=rptId),rptCode&&(opts.rptCode=rptCode),paramForm&&(opts.paramForm=paramForm),reportView&&(opts.reportView=reportView),opts}var htmlUrl=$url("/rest/reportRest/showHtmlReport.json"),exportUrl=$url("/rest/reportRest/exportReport.json"),printUrl=$url("/rest/reportRest/printReport.json");$.fn.report=function(e,t){if("string"==typeof e){var n=$.fn.pagination.methods[e];return n?n(this,t):this}return e=e||{},this.each(function(){var t=$.data(this,"report"),n=$(this);t?$.extend(t.options,e):$.data(this,"report",{options:$.extend({},$.fn.report.defaults,parseOptions(n),e)}),init(n)})},$.fn.report.methods={},$.fn.form.methods.exportReport=function(e,t){return $.isPlainObject(t)?e.each(function(){var e=$.data(this,"report_form");e||(e=buildForm(),$.data(this,"report_form",e)),exportReport(e,this,t)}):($.messager.alert("错误","请传入正确的报表参数！"),e)},$.fn.form.methods.printReport=function(e,t){return $.isPlainObject(t)?e.each(function(){var e=$.data(this,"report_form");e||(e=buildForm(),$.data(this,"report_form",e)),printReport(e,this,t)}):($.messager.alert("错误","请传入正确的报表参数！"),e)},$.fn.report.defaults={reportId:"",rptCode:"",paramForm:"",reportView:"",exportParam:{},printParam:{},loadMsg:$.fn.datagrid.defaults.loadMsg,onReportParam:$.noop,onPrintParam:$.noop,onExportParam:$.noop,exportTypes:[{type:"xlsx",text:"导出Excel文档"},{type:"docx",text:"导出Word文档"},{type:"pdf",text:"导出PDF文档"},{type:"csv",text:"导出CSV文档"},{type:"pptx",text:"导出pptx文档"},{type:"rtf",text:"导出rtf文档"}]},$.parser.plugins.push("report")}(jQuery,fmx),function(e,t){function n(){e.each(e.parser.plugins,function(t,n){var a=e.fn[n].methods;a&&(a.bind=function(t,a){return t.each(function(){var t=this;e.each(a,function(a,r){e.data(t,n).options[a]=function(){return e.fn[n].defaults[a].apply(t,arguments),r.apply(t,arguments)},e.data(t,"combo")&&(e.data(t,"combo").options[a]=function(){return e.fn.combo.defaults[a].apply(t,arguments),r.apply(t,arguments)})})})})}),setTimeout(function(){e("input:visible:enabled:first").focus()},50)}if($isChildWin()&&top.window.fmx){var a={onTabActive:function(){e(window).triggerHandler("tabActive")},hasDataChanges:function(){return e(window).triggerHandler("hasDataChanges")}},r=top.window.fmx.tabPages,i=$getParam("_pageKey");i&&r&&(r.$regListener(i,a),$addListener("unload",function(){r.$removeListener(i)}))}e.fn.maskit=function(n,a){return this.each(function(){var r=e(this);e.data(this,"_maskit")||t.utils.maskit(r),"unmask"===n?t.utils.maskit(r,!1,a):t.utils.maskit(r,!0,a)})},e.fn.dialog.defaults.modal=!0,function(){t.pageContext.locale&&t.pageContext.locale.indexOf("cn")>-1&&numeral.language("chs"),e.toJSON=JSON.stringify}(),e(n)}(jQuery,fmx),function(e){function t(e,t){if(n=e.children(t),n.length)return n;for(;(e=e.parent())&&e.length;){var n=e.find(t);if(n.length)return n}return[]}function n(e){e&&e.length&&!e.hasClass("l-btn-disabled")&&!e.attr("masking")&&e.click()}document.onkeydown=function(a){if(a||(a=window.event),8==a.keyCode){if(a.target){if("true"==a.target.contentEditable||1==a.target.contentEditable)return!0;var r=a.target.type;if("text"==r||"textarea"==r||"password"==r)return!a.target.getAttribute("readonly")&&!a.target.getAttribute("disabled")}if(a.srcElement){if("true"==a.srcElement.contentEditable||1==a.srcElement.contentEditable)return!0;var r=a.srcElement.type;if("text"==r||"textarea"==r||"password"==r)return!a.srcElement.getAttribute("readonly")&&!a.srcElement.getAttribute("disabled")}return!1}if(13==a.keyCode&&a.target){var i=e(a.target||a.data.target);setTimeout(function(){n(t(i,"a.easyui-linkbutton[default]:first"))},0)}else{if(a.altKey&&(37==a.keyCode||39==a.keyCode))return!1;if(a.ctrlKey&&a.keyCode>=65&&a.keyCode<=90){var o=String.fromCharCode(a.keyCode);if("C"!=o&&"X"!=o&&"V"!=o&&"Z"!=o){var i=e(a.target||a.data.target);if(i.size())o=o.toLowerCase(),n(t(i,"a[key='"+o+"']:visible:first"));else{var s=e("body");e("div.panel[style*='z-index']:visible").each(function(){e(this).css("z-index")>("auto"==s.css("z-index")?0:s.css("z-index"))&&(s=e(this))}),n(s.find("a[key='"+o+"']:visible:first"))}return!1}}else if(a.ctrlKey&&a.keyCode>=37&&a.keyCode<=40){var d=e(":focus");if(d.closest(".datagrid-editable").size()>0)switch(a.preventDefault(),a.keyCode){case 37:case 39:var l=d.closest(".datagrid-row-editing").find("input:visible"),u=l.index(d);37==a.keyCode?u--:u++,u>=l.size()&&(u-=l.size()),l.eq(u).focus();break;case 38:case 40:var c=d.closest("td[field]").index(),f=d.closest("tr.datagrid-row-editing").parent().children(),h=d.closest("tr.datagrid-row-editing").index();38==a.keyCode?h--:h++,h>=f.size()&&(h-=f.size()),f.eq(h).children()[c].click()}}}}}(jQuery),function(e,t){var n={onBefore:function(t,n){e("[fit='true']",t).parent().css("overflow","hidden"),e("[tooltip]",t).tooltip(),e(e.parser).triggerHandler("onBefore",[t,n])},parse:function(t){for(var n={},a=0;a<e.parser.plugins.length;a++){var r=e.parser.plugins[a],i=e(".easyui-"+r,t);n[r]=i}e.parser.onBefore.call(e.parser,t,n);var o=[];if(e.each(n,function(e,t){t&&t.length&&(t[e]?t[e]():o.push({name:e,jq:t}))}),o.length&&window.easyloader){for(var s=[],a=0;a<o.length;a++)s.push(o[a].name);easyloader.load(s,function(){for(var a=0;a<o.length;a++){var r=o[a].name,i=o[a].jq;i[r]()}e.parser.onComplete.call(e.parser,t,n)})}else e.parser.onComplete.call(e.parser,t,n)},onComplete:function(t,n){e(e.parser).triggerHandler("onComplete",[t,n]),t||e("body").css("visibility","visible")}};e.extend(e.parser,n)}(jQuery,fmx);